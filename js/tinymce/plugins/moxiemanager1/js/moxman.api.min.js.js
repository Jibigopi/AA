(function (e, t) {
    "use strict";

    function n(e, t) {
        for (var n, i = [], r = 0; e.length > r; ++r) {
            if (n = s[e[r]] || o(e[r]), !n) throw "module definition dependecy not found: " + e[r];
            i.push(n)
        }
        t.apply(null, i)
    }

    function i(e, i, r) {
        if ("string" != typeof e) throw "invalid module definition, module id must be defined and be a string";
        if (i === t) throw "invalid module definition, dependencies must be specified";
        if (r === t) throw "invalid module definition, definition function must be specified";
        n(i, function () {
            s[e] = r.apply(null, arguments)
        })
    }

    function r(e) {
        return !!s[e]
    }

    function o(t) {
        for (var n = e, i = t.split(/[.\/]/), r = 0; i.length > r; ++r) {
            if (!n[i[r]]) return;
            n = n[i[r]]
        }
        return n
    }

    function a(n) {
        for (var i = 0; n.length > i; i++) {
            for (var r = e, o = n[i], a = o.split(/[.\/]/), l = 0; a.length - 1 > l; ++l) r[a[l]] === t && (r[a[l]] = {}), r = r[a[l]];
            r[a[a.length - 1]] = s[o]
        }
    }
    var s = {}, l = "moxman/util/Tools",
        u = "moxman/util/Class",
        c = "moxman/ui/Layout",
        d = "moxman/ui/AbsoluteLayout",
        f = "moxman/ui/BorderLayout",
        p = "moxman/ui/Selector",
        h = "moxman/ui/Collection",
        m = "moxman/ui/EventUtils",
        g = "moxman/ui/DomUtils",
        v = "moxman/ui/Control",
        x = "moxman/ui/Movable",
        y = "moxman/ui/Tooltip",
        b = "moxman/ui/Widget",
        w = "moxman/ui/Button",
        _ = "moxman/ui/Factory",
        E = "moxman/ui/Container",
        C = "moxman/ui/ButtonGroup",
        R = "moxman/ui/Carousel",
        T = "moxman/ui/Checkbox",
        A = "moxman/ui/CheckboxGroup",
        k = "moxman/ui/DragHelper",
        S = "moxman/ui/Scrollable",
        D = "moxman/ui/Panel",
        F = "moxman/ui/Resizable",
        I = "moxman/ui/FloatPanel",
        M = "moxman/ui/KeyboardNavigation",
        N = "moxman/ui/ColorButton",
        H = "moxman/ui/ComboBox",
        P = "moxman/ui/FormItem",
        O = "moxman/ui/Form",
        L = "moxman/ui/FieldSet",
        W = "moxman/ui/FitLayout",
        z = "moxman/ui/FlexLayout",
        B = "moxman/ui/FlowLayout",
        U = "moxman/ui/Grid",
        j = "moxman/ui/GridLayout",
        V = "moxman/ui/Iframe",
        q = "moxman/ui/Image",
        X = "moxman/gfx/Shader",
        G = "moxman/gfx/Texture",
        Y = "moxman/gfx/ImageEditor",
        $ = "moxman/util/Json",
        J = "moxman/util/Xhr",
        K = "moxman/util/JsonRpc",
        Z = "moxman/util/Path",
        Q = "moxman/Env",
        et = "moxie/core/utils/Basic",
        tt = "moxie/core/Exceptions",
        nt = "moxie/core/EventTarget",
        it = "moxie/core/utils/Encode",
        rt = "moxie/core/utils/Url",
        ot = "moxie/core/utils/Env",
        at = "moxie/core/utils/Dom",
        st = "moxie/runtime/Runtime",
        lt = "moxie/runtime/RuntimeClient",
        ut = "moxie/runtime/RuntimeTarget",
        ct = "moxie/file/Blob",
        dt = "moxie/xhr/FormData",
        ft = "moxie/core/I18n",
        pt = "moxie/core/utils/Mime",
        ht = "moxie/xhr/XMLHttpRequest",
        mt = "moxie/file/File",
        gt = "moxie/file/FileReaderSync",
        vt = "moxie/file/BlobBuilder",
        xt = "moxman/ui/ImageCanvas",
        yt = "moxman/ui/Label",
        bt = "moxman/ui/Toolbar",
        wt = "moxman/ui/MenuBar",
        _t = "moxman/ui/MenuButton",
        Et = "moxman/ui/ListBox",
        Ct = "moxman/ui/MenuItem",
        Rt = "moxman/ui/Menu",
        Tt = "moxman/ui/Window",
        At = "moxman/ui/MessageBox",
        kt = "moxman/ui/PanelButton",
        St = "moxman/ui/Path",
        Dt = "moxman/ui/Progress",
        Ft = "moxman/ui/Radio",
        It = "moxman/ui/RadioGroup",
        Mt = "moxman/ui/Slider",
        Nt = "moxman/ui/Spacer",
        Ht = "moxman/ui/SplitButton",
        Pt = "moxman/ui/StackLayout",
        Ot = "moxman/ui/TabPanel",
        Lt = "moxman/ui/TextBox",
        Wt = "moxman/ui/Throbber",
        zt = "moxman/ui/ThumbnailView",
        Bt = "moxman/ui/TreeItem",
        Ut = "moxman/ui/TreeView",
        jt = "moxman/ui/View",
        Vt = "moxman/ui/ViewPort",
        qt = "moxman/util/DateFormatter",
        Xt = "moxman/util/Fullscreen",
        Gt = "moxman/util/I18n",
        Yt = "moxman/util/ImageSize",
        $t = "moxman/util/Loader",
        Jt = "moxman/util/MinQuery",
        Kt = "moxman/util/Observable",
        Zt = "moxman/util/Shortcuts",
        Qt = "moxman/util/Uri",
        en = "moxman/util/When",
        tn = "moxman/vfs/FileCollection",
        nn = "moxman/vfs/File",
        rn = "moxman/vfs/FileSystem",
        on = "moxman/vfs/FileSystemManager",
        an = "moxman/views/LoginView",
        sn = "moxman/views/InstallView",
        ln = "moxman/views/BaseView",
        un = "moxman/views/CreateDirView",
        cn = "moxman/views/CreateDocView",
        dn = "moxman/views/EditView",
        fn = "moxman/Loader",
        pn = "moxman/views/FileListView",
        hn = "moxman/views/GalleryView",
        mn = "moxman/views/RenameView",
        gn = "moxie/file/FileInput",
        vn = "moxie/file/FileDrop",
        xn = "moxman/views/UploadView",
        yn = "moxman/views/ZipView",
        bn = "moxman/PluginManager",
        wn = "moxman/Manager",
        _n = "moxie/runtime/html5/Runtime",
        En = "moxie/runtime/html5/file/Blob",
        Cn = "moxie/core/utils/Events",
        Rn = "moxie/runtime/html5/file/FileDrop",
        Tn = "moxie/runtime/html5/file/FileInput",
        An = "moxie/core/JSON",
        kn = "moxie/runtime/html5/xhr/XMLHttpRequest",
        Sn = "moxie/runtime/flash/Runtime",
        Dn = "moxie/runtime/flash/file/Blob",
        Fn = "moxie/runtime/flash/file/FileInput",
        In = "moxie/runtime/Transporter",
        Mn = "moxie/runtime/flash/xhr/XMLHttpRequest",
        Nn = "moxie/runtime/flash/file/FileReaderSync";
    i(l, [], function () {
        return {
            makeMap: function (e, t, n) {
                var i;
                for (e = e || [], t = t || ",", "string" == typeof e && (e = e.split(t)), n = n || {}, i = e.length; i--;) n[e[i]] = {};
                return n
            },
            unique: function (e) {
                for (var t = [], n = e.length, i; n--;) i = e[n], i.__checked || (t.push(i), i.__checked = 1);
                for (n = t.length; n--;) delete t[n].__checked;
                return t
            },
            extend: function (e) {
                var t = arguments,
                    n, i, r;
                for (i = 1; t.length > i; i++) {
                    n = t[i];
                    for (r in n) e[r] = n[r]
                }
                return e
            },
            toArray: function (e) {
                var t = [],
                    n, i;
                for (n = 0, i = e.length; i > n; n++) t[n] = e[n];
                return t
            },
            inArray: function (e, t) {
                var n;
                if (t.indexOf) return t.indexOf(e);
                for (n = t.length; n--;)
                    if (t[n] === e) return n;
                return -1
            },
            isArray: Array.isArray || function (e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            },
            each: function (e, t) {
                var n, i, r, o;
                if (e)
                    if (n = e.length, n === o) {
                        for (i in e)
                            if (e.hasOwnProperty(i) && t(e[i], i) === !1) return !1
                    } else
                        for (r = 0; n > r; r++)
                            if (t(e[r], r) === !1) return !1;
                return !0
            }
        }
    }), i(u, [l], function (e) {
        function t() {}
        var n, i;
        return t.extend = n = function (t) {
            function r() {
                var e, t, n, r;
                if (!i && (r = this, r.init && r.init.apply(r, arguments), t = r.Mixins))
                    for (e = t.length; e--;) n = t[e], n.init && n.init.apply(r, arguments)
            }

            function o() {
                return this
            }

            function a(e, t) {
                return function () {
                    var n = this,
                        i = n._super,
                        r;
                    return n._super = l[e], r = t.apply(n, arguments), n._super = i, r
                }
            }
            var s = this,
                l = s.prototype,
                u, c, d;
            i = !0, u = new s, i = !1, t.Mixins && (e.each(t.Mixins, function (e) {
                e = e;
                for (var n in e) "init" !== n && (t[n] = e[n])
            }), l.Mixins && (t.Mixins = l.Mixins.concat(t.Mixins))), t.Methods && e.each(t.Methods.split(","), function (e) {
                t[e] = o
            }), t.Properties && e.each(t.Properties.split(","), function (e) {
                var n = "_" + e;
                t[e] = function (e) {
                    var t = this,
                        i;
                    return e !== i ? (t[n] = e, t) : t[n]
                }
            }), t.Statics && e.each(t.Statics, function (e, t) {
                r[t] = e
            }), t.Defaults && l.Defaults && (t.Defaults = e.extend({}, l.Defaults, t.Defaults));
            for (c in t) d = t[c], u[c] = "function" == typeof d && l[c] ? a(c, d) : d;
            return r.prototype = u, r.constructor = r, r.extend = n, r
        }, t
    }), i(c, [u, l], function (e, t) {
        return e.extend({
            Defaults: {
                firstControlClass: "first",
                lastControlClass: "last"
            },
            init: function (e) {
                this.settings = t.extend({}, this.Defaults, e)
            },
            preRender: function (e) {
                e.addClass(this.settings.containerClass, "body")
            },
            applyClasses: function (e) {
                var t = this,
                    n = t.settings,
                    i, r, o;
                i = e.items().filter(":visible"), r = n.firstControlClass, o = n.lastControlClass, i.each(function (e) {
                    e.removeClass(r).removeClass(o), n.controlClass && e.addClass(n.controlClass)
                }), i.eq(0).addClass(r), i.eq(-1).addClass(o)
            },
            renderHtml: function (e) {
                var t = this,
                    n = t.settings,
                    i, r = "";
                return i = e.items(), i.eq(0).addClass(n.firstControlClass), i.eq(-1).addClass(n.lastControlClass), i.each(function (e) {
                    n.controlClass && e.addClass(n.controlClass), r += e.renderHtml()
                }), r
            },
            recalc: function () {},
            postRender: function () {}
        })
    }), i(d, [c], function (e) {
        return e.extend({
            Defaults: {
                containerClass: "abs-layout",
                controlClass: "abs-layout-item"
            },
            recalc: function (e) {
                e.items().filter(":visible").each(function (e) {
                    var t = e.settings;
                    e.layoutRect({
                        x: t.x,
                        y: t.y,
                        w: t.w,
                        h: t.h
                    }), e.recalc && e.recalc()
                })
            },
            renderHtml: function (e) {
                return '<div id="' + e._id + '-absend" class="' + e.classPrefix + 'abs-end"></div>' + this._super(e)
            }
        })
    }), i(f, [d], function (e) {
        return e.extend({
            recalc: function (e) {
                function t(e, t, n, i, r) {
                    var o = e._marginBox;
                    e.layoutRect({
                        x: t + o.left,
                        y: n + o.top,
                        w: i + o.left + o.right,
                        h: r + o.top + o.bottom,
                        autoResize: !1
                    }), e.recalc && e.recalc()
                }
                var n, i, r, o, a, s, l, u, c, d, f, p, h, m, g, v, x, y, b, w, _;
                for (n = e.layoutRect(), m = e.paddingBox(), i = n.innerW, r = n.innerH, s = m.left, l = m.top, u = i - (m.right + m.left), c = r - (m.bottom + m.top), d = e.items().filter(":visible"), p = 0; d.length > p; p++) f = d[p], w = f.settings, _ = f.layoutRect(), h = w.region, o = _.w, a = _.h, o > 0 && 1 > o && (o = Math.ceil(i * o)), a > 0 && 1 > a && (a = Math.ceil(r * a)), g = w.minWidth, v = w.minHeight, x = w.maxWidth, y = w.maxHeight, o = g && g > o ? g : o, a = v && v > a ? v : a, o = x && o > x ? x : o, a = y && a > y ? y : a, "north" === h ? (t(f, s, l, u, a), l += a, c -= a) : "east" === h ? (t(f, i - o - m.right, l, o, c), u -= o) : "south" === h ? (t(f, s, r - a - m.bottom, u, a), c -= a) : "west" === h ? (t(f, s, l, o, c), s += o, u -= o) : b = f;
                if (!b) throw Error("You must define a center region for border layout.");
                t(b, s, l, u, c)
            }
        })
    }), i(p, [u, l], function (e, n) {
        function i(e) {
            for (var t = [], n = e.length, i; n--;) i = e[n], i.__checked || (t.push(i), i.__checked = 1);
            for (n = t.length; n--;) delete t[n].__checked;
            return t
        }
        var r = /^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,
            o = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
            a = /^\s*|\s*$/g,
            s, l = e.extend({
                init: function (e) {
                    function n(e) {
                        return e ? (e = e.toLowerCase(), function (t) {
                            return "*" === e || t.type === e
                        }) : t
                    }

                    function i(e) {
                        return e ? function (t) {
                            return t._name === e
                        } : t
                    }

                    function s(e) {
                        return e ? (e = e.split("."), function (t) {
                            for (var n = e.length; n--;)
                                if (!t.hasClass(e[n])) return !1;
                            return !0
                        }) : t
                    }

                    function l(e, n, i) {
                        return e ? function (t) {
                            var r = t[e] ? t[e]() : "";
                            return n ? "=" === n ? r === i : "*=" === n ? r.indexOf(i) >= 0 : "~=" === n ? (" " + r + " ").indexOf(" " + i + " ") >= 0 : "!=" === n ? r != i : "^=" === n ? 0 === r.indexOf(i) : "$=" === n ? r.substr(r.length - i.length) === i : !1 : !! i
                        } : t
                    }

                    function u(e) {
                        var n;
                        return e ? (e = /(?:not\((.+)\))|(.+)/i.exec(e), e[1] ? (n = d(e[1], []), function (e) {
                            return !f(e, n)
                        }) : (e = e[2], function (t, n, i) {
                            return "first" === e ? 0 === n : "last" === e ? n === i - 1 : "even" === e ? 0 === n % 2 : "odd" === e ? 1 === n % 2 : t[e] ? t[e]() : !1
                        })) : t
                    }

                    function c(e, t, o) {
                        function c(e) {
                            e && t.push(e)
                        }
                        var d;
                        return d = r.exec(e.replace(a, "")), c(n(d[1])), c(i(d[2])), c(s(d[3])), c(l(d[4], d[5], d[6])), c(u(d[7])), t.psuedo = !! d[7], t.direct = o, t
                    }

                    function d(e, t) {
                        var n = [],
                            i, r, a;
                        do
                            if (o.exec(""), r = o.exec(e), r && (e = r[3], n.push(r[1]), r[2])) {
                                i = r[3];
                                break
                            } while (r);
                        for (i && d(i, t), e = [], a = 0; n.length > a; a++) ">" != n[a] && e.push(c(n[a], [], ">" === n[a - 1]));
                        return t.push(e), t
                    }
                    var f = this.match;
                    this._selectors = d(e, [])
                },
                match: function (e, t) {
                    var i, r, o, a, s, l, u, c, d, f, p, h, m;
                    for (t = t || this._selectors, i = 0, r = t.length; r > i; i++) {
                        for (s = t[i], a = s.length, m = e, h = 0, o = a - 1; o >= 0; o--)
                            for (c = s[o]; m;) {
                                for (c.psuedo && (p = m.parent().items(), d = n.inArray(m, p), f = p.length), l = 0, u = c.length; u > l; l++)
                                    if (!c[l](m, d, f)) {
                                        l = u + 1;
                                        break
                                    }
                                if (l === u) {
                                    h++;
                                    break
                                }
                                if (o === a - 1) break;
                                m = m.parent()
                            }
                        if (h === a) return !0
                    }
                    return !1
                },
                find: function (e) {
                    function t(e, i, r) {
                        var o, a, s, l, u, c = i[r];
                        for (o = 0, a = e.length; a > o; o++) {
                            for (u = e[o], s = 0, l = c.length; l > s; s++)
                                if (!c[s](u, o, a)) {
                                    s = l + 1;
                                    break
                                }
                            if (s === l) r == i.length - 1 ? n.push(u) : u.items && t(u.items(), i, r + 1);
                            else if (c.direct) return;
                            u.items && t(u.items(), i, r)
                        }
                    }
                    var n = [],
                        r, o, a = this._selectors;
                    if (e.items) {
                        for (r = 0, o = a.length; o > r; r++) t(e.items(), a[r], 0);
                        o > 1 && (n = i(n))
                    }
                    return s || (s = l.Collection), new s(n)
                }
            });
        return l
    }), i(h, [l, p, u], function (e, n, i) {
        var r, o, a = Array.prototype.push,
            s = Array.prototype.slice;
        return o = {
            length: 0,
            init: function (e) {
                e && this.add(e)
            },
            add: function (t) {
                var n = this;
                return e.isArray(t) ? a.apply(n, t) : t instanceof r ? n.add(t.toArray()) : a.call(n, t), n
            },
            set: function (e) {
                var t = this,
                    n = t.length,
                    i;
                for (t.length = 0, t.add(e), i = t.length; n > i; i++) delete t[i];
                return t
            },
            filter: function (e) {
                var t = this,
                    i, o, a = [],
                    s, l;
                for ("string" == typeof e ? (e = new n(e), l = function (t) {
                    return e.match(t)
                }) : l = e, i = 0, o = t.length; o > i; i++) s = t[i], l(s) && a.push(s);
                return new r(a)
            },
            slice: function () {
                return new r(s.apply(this, arguments))
            },
            eq: function (e) {
                return -1 === e ? this.slice(e) : this.slice(e, +e + 1)
            },
            each: function (t) {
                return e.each(this, t), this
            },
            toArray: function () {
                return e.toArray(this)
            },
            indexOf: function (e) {
                for (var t = this, n = t.length; n-- && t[n] !== e;);
                return n
            },
            reverse: function () {
                return new r(e.toArray(this).reverse())
            },
            hasClass: function (e) {
                return this[0] ? this[0].hasClass(e) : !1
            },
            prop: function (e, n) {
                var i = this,
                    r, o;
                return n !== r ? (i.each(function (t) {
                    t[e] && t[e](n)
                }), i) : (o = i[0], o && o[e] ? o[e]() : t)
            },
            exec: function (t) {
                var n = this,
                    i = e.toArray(arguments).slice(1);
                return n.each(function (e) {
                    e[t] && e[t].apply(e, i)
                }), n
            }
        }, e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "), function (t) {
            o[t] = function () {
                var n = e.toArray(arguments);
                return this.each(function (e) {
                    t in e && e[t].apply(e, n)
                }), this
            }
        }), e.each("text name width height disabled active selected checked visible parent value data".split(" "), function (e) {
            o[e] = function (t) {
                return this.prop(e, t)
            }
        }), r = i.extend(o), n.Collection = r, r
    }), i(m, [], function () {
        function e(e, t, n, i) {
            e.addEventListener ? e.addEventListener(t, n, i || !1) : e.attachEvent && e.attachEvent("on" + t, n)
        }

        function n(e, t, n, i) {
            e.removeEventListener ? e.removeEventListener(t, n, i || !1) : e.detachEvent && e.detachEvent("on" + t, n)
        }

        function i(e, t) {
            function n() {
                return !1
            }

            function i() {
                return !0
            }
            var r, o = t || {};
            for (r in e) "layerX" !== r && "layerY" !== r && (o[r] = e[r]);
            return o.target || (o.target = o.srcElement || document), o.preventDefault = function () {
                o.isDefaultPrevented = i, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
            }, o.stopPropagation = function () {
                o.isPropagationStopped = i, e && (e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0)
            }, o.stopImmediatePropagation = function () {
                o.isImmediatePropagationStopped = i, o.stopPropagation()
            }, o.isDefaultPrevented || (o.isDefaultPrevented = n, o.isPropagationStopped = n, o.isImmediatePropagationStopped = n), o
        }

        function r(i, r, o) {
            function a() {
                o.domLoaded || (o.domLoaded = !0, r(c))
            }

            function s() {
                "complete" === u.readyState && (n(u, "readystatechange", s), a())
            }

            function l() {
                try {
                    u.documentElement.doScroll("left")
                } catch (e) {
                    return setTimeout(l, 0), t
                }
                a()
            }
            var u = i.document,
                c = {
                    type: "ready"
                };
            u.addEventListener ? e(i, "DOMContentLoaded", a) : (e(u, "readystatechange", s), u.documentElement.doScroll && i === i.top && l()), e(i, "load", a)
        }

        function o() {
            function t(e, t) {
                var n, i, r, o;
                if (n = s[t][e.type])
                    for (i = 0, r = n.length; r > i; i++)
                        if (o = n[i], o && o.func.call(o.scope, e) === !1 && e.preventDefault(), e.isImmediatePropagationStopped()) return
            }
            var o = this,
                s = {}, l, u, c, d, f;
            u = a + (+new Date).toString(32), d = "onmouseenter" in document.documentElement, c = "onfocusin" in document.documentElement, f = {
                mouseenter: "mouseover",
                mouseleave: "mouseout"
            }, l = 1, o.domLoaded = !1, o.events = s, o.bind = function (n, a, p, h) {
                function m(e) {
                    t(i(e || E.event), g)
                }
                var g, v, x, y, b, w, _, E = window;
                if (n && 3 !== n.nodeType && 8 !== n.nodeType) {
                    for (n[u] ? g = n[u] : (g = l++, n[u] = g, s[g] = {}), h = h || n, a = a.split(" "), x = a.length; x--;) y = a[x], w = m, b = _ = !1, "DOMContentLoaded" === y && (y = "ready"), o.domLoaded && "ready" === y ? p.call(h, i({
                        type: y
                    })) : (d || (b = f[y], b && (w = function (e) {
                        var n, r;
                        if (n = e.currentTarget, r = e.relatedTarget, r && n.contains) r = n.contains(r);
                        else
                            for (; r && r !== n;) r = r.parentNode;
                        r || (e = i(e || E.event), e.type = "mouseout" === e.type ? "mouseleave" : "mouseenter", e.target = n, t(e, g))
                    })), c || "focusin" !== y && "focusout" !== y || (_ = !0, b = "focusin" === y ? "focus" : "blur", w = function (e) {
                        e = i(e || E.event), e.type = "focus" === e.type ? "focusin" : "focusout", t(e, g)
                    }), v = s[g][y], v ? v.push({
                        func: p,
                        scope: h
                    }) : (s[g][y] = v = [{
                        func: p,
                        scope: h
                    }], v.fakeName = b, v.capture = _, v.nativeHandler = w, "ready" === y ? r(n, w, o) : e(n, b || y, w, _)));
                    return n = v = 0, p
                }
            }, o.unbind = function (e, t, i) {
                var r, a, l, c, d, f;
                if (!e || 3 === e.nodeType || 8 === e.nodeType) return o;
                if (r = e[u]) {
                    if (f = s[r], t) {
                        for (t = t.split(" "), l = t.length; l--;)
                            if (d = t[l], a = f[d]) {
                                if (i)
                                    for (c = a.length; c--;) a[c].func === i && a.splice(c, 1);
                                i && 0 !== a.length || (delete f[d], n(e, a.fakeName || d, a.nativeHandler, a.capture))
                            }
                    } else {
                        for (d in f) a = f[d], n(e, a.fakeName || d, a.nativeHandler, a.capture);
                        f = {}
                    }
                    for (d in f) return o;
                    delete s[r];
                    try {
                        delete e[u]
                    } catch (p) {
                        e[u] = null
                    }
                }
                return o
            }, o.fire = function (e, n, r) {
                var a, s;
                if (!e || 3 === e.nodeType || 8 === e.nodeType) return o;
                s = i(null, r), s.type = n;
                do a = e[u], a && t(s, a), e = e.parentNode || e.ownerDocument || e.defaultView || e.parentWindow; while (e && !s.isPropagationStopped());
                return o
            }, o.clean = function (e) {
                var t, n, i = o.unbind;
                if (!e || 3 === e.nodeType || 8 === e.nodeType) return o;
                if (e[u] && i(e), e.getElementsByTagName || (e = e.document), e && e.getElementsByTagName)
                    for (i(e), n = e.getElementsByTagName("*"), t = n.length; t--;) e = n[t], e[u] && i(e);
                return o
            }, o.destory = function () {
                s = {}
            }
        }
        var a = "moxman-data-";
        return o
    }), i(g, [l, m], function (e, n) {
        var i = e.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom", " "),
            r = 0,
            o = new n,
            a = {
                id: function () {
                    return "moxman-" + r++
                },
                createFragment: function (e) {
                    var t, n, i = document,
                        r;
                    for (r = i.createElement("div"), t = i.createDocumentFragment(), r.innerHTML = e; n = r.firstChild;) t.appendChild(n);
                    return t
                },
                getWindowSize: function () {
                    var e, t, n = window,
                        i = document,
                        r = i.body,
                        o = i.documentElement;
                    return r.offsetWidth && (e = r.offsetWidth, t = r.offsetHeight), "CSS1Compat" == i.compatMode && o.offsetWidth && (e = o.offsetWidth, t = o.offsetHeight), n.innerWidth && n.innerHeight && (e = n.innerWidth, t = n.innerHeight), {
                        w: e,
                        h: t
                    }
                },
                getViewPort: function (e) {
                    var t, n;
                    return e = e ? e : this.win, t = e.document, n = this.boxModel ? t.documentElement : t.body, {
                        x: e.pageXOffset || n.scrollLeft,
                        y: e.pageYOffset || n.scrollTop,
                        w: e.innerWidth || n.clientWidth,
                        h: e.innerHeight || n.clientHeight
                    }
                },
                getDocumentSize: function () {
                    var e = document,
                        t, n, i, r, o, a, s, l, u = Math.max;
                    return t = e.documentElement, n = e.body, i = u(t.scrollWidth, n.scrollWidth), r = u(t.clientWidth, n.clientWidth), o = u(t.offsetWidth, n.offsetWidth), a = u(t.scrollHeight, n.scrollHeight), s = u(t.clientHeight, n.clientHeight), l = u(t.offsetHeight, n.offsetHeight), {
                        width: o > i ? r : i,
                        height: l > a ? s : a
                    }
                },
                getSize: function (e) {
                    var t, n, i;
                    return e.getBoundingClientRect ? (i = e.getBoundingClientRect(), t = i.right - i.left, n = i.bottom - i.top) : (t = e.offsetWidth, n = e.offsetHeight), {
                        width: t,
                        height: n
                    }
                },
                getPos: function (e, t) {
                    var n, i, r, o, a, s;
                    if (n = i = 0, e)
                        if (r = document, o = r.body, t = t || o, e.getBoundingClientRect) s = e.getBoundingClientRect(), e = r.documentElement, n = s.left + (e.scrollLeft || o.scrollLeft) - e.clientTop, i = s.top + (e.scrollTop || o.scrollTop) - e.clientLeft;
                        else {
                            for (a = e; a && a != t && a.nodeType;) n += a.offsetLeft || 0, i += a.offsetTop || 0, a = a.offsetParent;
                            for (a = e.parentNode; a && a != t && a.nodeType;) n -= a.scrollLeft || 0, i -= a.scrollTop || 0, a = a.parentNode
                        }
                    return {
                        x: n,
                        y: i
                    }
                },
                get: function (e) {
                    return document.getElementById(e)
                },
                addClass: function (e, t) {
                    t && !this.hasClass(e, t) && (e.className += e.className ? " " + t : t)
                },
                removeClass: function (e, t) {
                    this.hasClass(e, t) && (t = e.className.replace(RegExp("(^|\\s+)" + t + "(\\s+|$)", "g"), " "), " " === t ? e.removeAttribute("class") : e.className = t)
                },
                hasClass: function (e, t) {
                    return e && t && -1 !== (" " + e.className + " ").indexOf(" " + t + " ")
                },
                toggleClass: function (e, n, i) {
                    i = i === t ? !this.hasClass(e, n) : i, this.hasClass(e, n) !== i && (i ? this.addClass(e, n) : this.removeClass(e, n))
                },
                attr: function (e, n, i) {
                    return i === t ? e.getAttribute(n, i) : (e.setAttribute(n, i), t)
                },
                css: function (e, n, r) {
                    var o = e.style,
                        a;
                    if (n)
                        if ("string" == typeof n) {
                            n = n.replace(/-(\D)/g, function (e, t) {
                                return t.toUpperCase()
                            }), "number" != typeof r || i[n] || (r += "px"), "opacity" === n && e.runtimeStyle && e.runtimeStyle.opacity === t && (o.filter = "" === r ? "" : "alpha(opacity=" + 100 * r + ")");
                            try {
                                o[n] = r
                            } catch (s) {}
                        } else
                            for (a in n) this.css(e, a, n[a])
                },
                on: function (e, t, n, i) {
                    return o.bind(e, t, n, i)
                },
                off: function (e, t, n) {
                    return o.unbind(e, t, n)
                },
                fire: function (e, t, n) {
                    return o.fire(e, t, n)
                }
            };
        return a
    }), i(v, [u, l, h, g], function (e, n, i, r) {
        var o = n.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu", " "),
            a = {}, s = "onmousewheel" in document,
            l = !1,
            u = e.extend({
                Statics: {
                    controlIdLookup: {},
                    classPrefix: "moxman-"
                },
                classPrefix: "moxman-",
                getContainerElm: function () {
                    return document.body
                },
                getParentCtrl: function (e) {
                    for (var t; e && !(t = u.controlIdLookup[e.id]);) e = e.parentNode;
                    return t
                },
                init: function (e) {
                    var i = this,
                        o, a;
                    if (i.settings = e = n.extend({}, i.Defaults, e), i._id = r.id(), i._text = i._name = "", i._width = i._height = 0, i._aria = {
                        role: e.role
                    }, o = e.classes)
                        for (o = o.split(" "), o.map = {}, a = o.length; a--;) o.map[o[a]] = !0;
                    i._classes = o || [], i.visible(!0), n.each("title text width height name classes visible disabled active value".split(" "), function (t) {
                        var n = e[t],
                            r;
                        n !== r ? i[t](n) : i["_" + t] === r && (i["_" + t] = !1)
                    }), i.on("click", function () {
                        return i.disabled() ? !1 : t
                    }), e.classes && n.each(e.classes.split(" "), function (e) {
                        i.addClass(e)
                    }), i.settings = e, i._borderBox = i.parseBox(e.border), i._paddingBox = i.parseBox(e.padding), i._marginBox = i.parseBox(e.margin), e.hidden && i.hide()
                },
                Properties: "parent,title,text,width,height,disabled,active,name,value",
                Methods: "renderHtml,refresh",
                parseBox: function (e) {
                    var t, n = 10;
                    if (e) return "number" == typeof e ? (e = e || 0, {
                        top: e,
                        left: e,
                        bottom: e,
                        right: e
                    }) : (e = e.split(" "), t = e.length, 1 === t ? e[1] = e[2] = e[3] = e[0] : 2 === t ? (e[2] = e[0], e[3] = e[1]) : 3 === t && (e[3] = e[1]), {
                        top: parseInt(e[0], n) || 0,
                        right: parseInt(e[1], n) || 0,
                        bottom: parseInt(e[2], n) || 0,
                        left: parseInt(e[3], n) || 0
                    })
                },
                borderBox: function () {
                    return this._borderBox
                },
                paddingBox: function () {
                    return this._paddingBox
                },
                marginBox: function () {
                    return this._marginBox
                },
                measureBox: function (e, t) {
                    function n(t) {
                        var n = document.defaultView;
                        return n ? (t = t.replace(/[A-Z]/g, function (e) {
                            return "-" + e
                        }), n.getComputedStyle(e, null).getPropertyValue(t)) : e.currentStyle[t]
                    }

                    function i(e) {
                        var t = parseInt(n(e), 10);
                        return isNaN(t) ? 0 : t
                    }
                    return {
                        top: i(t + "TopWidth"),
                        right: i(t + "RightWidth"),
                        bottom: i(t + "BottomWidth"),
                        left: i(t + "LeftWidth")
                    }
                },
                initLayoutRect: function () {
                    var e = this,
                        n = e.settings,
                        i, r, o = e.getEl(),
                        a, s, l, u, c, d, f;
                    i = e._borderBox = e._borderBox || e.measureBox(o, "border"), e._paddingBox = e._paddingBox || e.measureBox(o, "padding"), e._marginBox = e._marginBox || e.measureBox(o, "margin"), d = n.minWidth, f = n.minHeight, l = d || o.offsetWidth, u = f || o.offsetHeight, a = n.width, s = n.height, c = n.autoResize, c = c !== t ? c : !a && !s, a = a || l, s = s || u;
                    var p = i.left + i.right,
                        h = i.top + i.bottom,
                        m = n.maxWidth || 65535,
                        g = n.maxHeight || 65535;
                    return e._layoutRect = r = {
                        x: n.x || 0,
                        y: n.y || 0,
                        w: a,
                        h: s,
                        deltaW: p,
                        deltaH: h,
                        contentW: a - p,
                        contentH: s - h,
                        innerW: a - p,
                        innerH: s - h,
                        startMinWidth: d || 0,
                        startMinHeight: f || 0,
                        minW: Math.min(l, m),
                        minH: Math.min(u, g),
                        maxW: m,
                        maxH: g,
                        autoResize: c,
                        scrollW: 0
                    }, e._lastLayoutRect = {}, r
                },
                layoutRect: function (e) {
                    var t = this,
                        n = t._layoutRect,
                        i, r, o, a, s, l;
                    return n || (n = t.initLayoutRect()), e ? (o = n.deltaW, a = n.deltaH, e.x !== s && (n.x = e.x), e.y !== s && (n.y = e.y), e.minW !== s && (n.minW = e.minW), e.minH !== s && (n.minH = e.minH), r = e.w, r !== s && (r = n.minW > r ? n.minW : r, r = r > n.maxW ? n.maxW : r, n.w = r, n.innerW = r - o), r = e.h, r !== s && (r = n.minH > r ? n.minH : r, r = r > n.maxH ? n.maxH : r, n.h = r, n.innerH = r - a), r = e.innerW, r !== s && (r = n.minW - o > r ? n.minW - o : r, r = r > n.maxW - o ? n.maxW - o : r, n.innerW = r, n.w = r + o), r = e.innerH, r !== s && (r = n.minH - a > r ? n.minH - a : r, r = r > n.maxH - a ? n.maxH - a : r, n.innerH = r, n.h = r + a), e.contentW !== s && (n.contentW = e.contentW), e.contentH !== s && (n.contentH = e.contentH), i = t._lastLayoutRect, (i.x !== n.x || i.y !== n.y || i.w !== n.w || i.h !== n.h) && (l = u.repaintControls, l && l.map && !l.map[t._id] && (l.push(t), l.map[t._id] = !0), i.x = n.x, i.y = n.y, i.w = n.w, i.h = n.h), t) : n
                },
                repaint: function () {
                    function e(e, t, n) {
                        return t > e && (e = t), e > n && (e = n), e
                    }
                    var t = this,
                        n, i, r, o, a = 0,
                        s = 0,
                        l;
                    n = t.getEl().style, r = t._layoutRect, l = t._lastRepaintRect || {}, o = t._borderBox, a = o.left + o.right, s = o.top + o.bottom, r.x !== l.x && (n.left = r.x + "px", l.x = r.x), r.y !== l.y && (n.top = r.y + "px", l.y = r.y), r.w !== l.w && (n.width = e(r.w - a, 0) + "px", l.w = r.w), r.h !== l.h && (n.height = e(r.h - s, 0) + "px", l.h = r.h), t._hasBody && r.innerW !== l.innerW && (i = t.getEl("body").style, i.width = e(r.innerW, 0) + "px", l.innerW = r.innerW), t._hasBody && r.innerH !== l.innerH && (i = i || t.getEl("body").style, i.height = e(r.innerH, 0) + "px", l.innerH = r.innerH), t._lastRepaintRect = l, t.fire("repaint", {}, !1)
                },
                on: function (e, n) {
                    function i(e) {
                        var n, i;
                        return function (o) {
                            return n || r.parents().each(function (r) {
                                var o = r.settings.callbacks;
                                return o && (n = o[e]) ? (i = r, !1) : t
                            }), n.call(i, o)
                        }
                    }
                    var r = this,
                        a, s, l, u;
                    if (n)
                        for ("string" == typeof n && (n = i(n)), l = e.toLowerCase().split(" "), u = l.length; u--;) e = l[u], a = r._bindings, a || (a = r._bindings = {}), s = a[e], s || (s = a[e] = []), s.push(n), o[e] && (r._nativeEvents ? r._nativeEvents[e] = !0 : r._nativeEvents = {
                            name: !0
                        }, r._rendered && r.bindPendingEvents());
                    return r
                },
                off: function (e, t) {
                    var n = this,
                        i, r = n._bindings,
                        o, a, s, l;
                    if (r)
                        if (e)
                            for (s = e.toLowerCase().split(" "), i = s.length; i--;) {
                                if (e = s[i], o = r[e], !e) {
                                    for (a in r) r[a].length = 0;
                                    return n
                                }
                                if (o)
                                    if (t)
                                        for (l = o.length; l--;) o[l] === t && o.splice(l, 1);
                                    else o.length = 0
                            } else n._bindings = [];
                    return n
                },
                fire: function (e, t, n) {
                    function i() {
                        return !1
                    }

                    function r() {
                        return !0
                    }
                    var o = this,
                        a, s, l, u;
                    if (e = e.toLowerCase(), t = t || {}, t.type || (t.type = e), t.control || (t.control = o), t.preventDefault || (t.preventDefault = function () {
                        t.isDefaultPrevented = r
                    }, t.stopPropagation = function () {
                        t.isPropagationStopped = r
                    }, t.stopImmediatePropagation = function () {
                        t.isImmediatePropagationStopped = r
                    }, t.isDefaultPrevented = i, t.isPropagationStopped = i, t.isImmediatePropagationStopped = i), o._bindings && (l = o._bindings[e]))
                        for (a = 0, s = l.length; s > a && (t.isImmediatePropagationStopped() || l[a].call(o, t) !== !1); a++);
                    if (n !== !1)
                        for (u = o.parent(); u && !t.isPropagationStopped();) u.fire(e, t, !1), u = u.parent();
                    return t
                },
                parents: function (e) {
                    var t = this,
                        n = new i;
                    for (t = t.parent(); t; t = t.parent()) n.add(t);
                    return e && (n = n.filter(e)), n
                },
                next: function () {
                    var e = this.parent().items();
                    return e[e.indexOf(this) + 1]
                },
                prev: function () {
                    var e = this.parent().items();
                    return e[e.indexOf(this) - 1]
                },
                findCommonAncestor: function (e, t) {
                    for (var n; e;) {
                        for (n = t; n && e != n;) n = n.parent();
                        if (e == n) break;
                        e = e.parent()
                    }
                    return e
                },
                hasClass: function (e, t) {
                    var n = this._classes[t || "control"];
                    return e = this.classPrefix + e, n && !! n.map[e]
                },
                addClass: function (e, t) {
                    var n = this,
                        i, r;
                    return e = this.classPrefix + e, i = n._classes[t || "control"], i || (i = [], i.map = {}, n._classes[t || "control"] = i), i.map[e] || (i.map[e] = e, i.push(e), n._rendered && (r = n.getEl(t), r && (r.className = i.join(" ")))), n
                },
                removeClass: function (e, t) {
                    var n = this,
                        i, r, o;
                    if (e = this.classPrefix + e, i = n._classes[t || "control"], i && i.map[e])
                        for (delete i.map[e], r = i.length; r--;) i[r] === e && i.splice(r, 1);
                    return n._rendered && (o = n.getEl(t), o && (o.className = i.join(" "))), n
                },
                toggleClass: function (e, t, n) {
                    var i = this;
                    return t ? i.addClass(e, n) : i.removeClass(e, n), i
                },
                classes: function (e) {
                    var t = this._classes[e || "control"];
                    return t ? t.join(" ") : ""
                },
                getEl: function (e, t) {
                    var n, i = e ? this._id + "-" + e : this._id;
                    return n = a[i] = (t === !0 ? null : a[i]) || r.get(i)
                },
                visible: function (e) {
                    var n = this,
                        i;
                    return e !== t ? (n._visible !== e && (n._rendered && (n.getEl().style.display = e ? "" : "none"), n._visible = e, i = n.parent(), i && (i._lastRect = null), n.fire(e ? "show" : "hide")), n) : n._visible
                },
                show: function () {
                    return this.visible(!0)
                },
                hide: function () {
                    return this.visible(!1)
                },
                focus: function () {
                    this.getEl().focus()
                },
                blur: function () {
                    this.getEl().blur()
                },
                aria: function (e, n) {
                    var i = this,
                        r = i.getEl();
                    return n === t ? i._aria[e] : (i._aria[e] = n, i._rendered && ("label" == e && r.setAttribute("aria-labeledby", i._id), r.setAttribute("role" == e ? e : "aria-" + e, n)), i)
                },
                encode: function (e, t) {
                    return t !== !1 && u.translate && (e = u.translate(e)), (e || "").replace(/[&<>"]/g, function (e) {
                        return "&#" + e.charCodeAt(0) + ";"
                    })
                },
                before: function (e) {
                    var t = this,
                        n = t.parent();
                    return n && n.insert(e, n.items().indexOf(t), !0), t
                },
                after: function (e) {
                    var t = this,
                        n = t.parent();
                    return n && n.insert(e, n.items().indexOf(t)), t
                },
                remove: function () {
                    var e = this,
                        t = e.getEl(),
                        n = e.parent(),
                        i;
                    if (e.items)
                        for (var o = e.items().toArray(), a = o.length; a--;) o[a].remove();
                    return n && n.items && (i = [], n.items().each(function (t) {
                        t !== e && i.push(t)
                    }), n.items().set(i), n._lastRect = null), e._eventsRoot && e._eventsRoot == e && r.off(t), delete u.controlIdLookup[e._id], t.parentNode && t.parentNode.removeChild(t), e
                },
                renderBefore: function (e) {
                    var t = this;
                    return e.parentNode.insertBefore(r.createFragment(t.renderHtml()), e), t.postRender(), t
                },
                renderTo: function (e) {
                    var t = this;
                    return e = e || t.getContainerElm(), e.appendChild(r.createFragment(t.renderHtml())), t.postRender(), t
                },
                postRender: function () {
                    var e = this,
                        t = e.settings,
                        n, i, o, a, s;
                    for (a in t) 0 === a.indexOf("on") && e.on(a.substr(2), t[a]);
                    if (e._eventsRoot) {
                        for (o = e.parent(); !s && o; o = o.parent()) s = o._eventsRoot;
                        if (s)
                            for (a in s._nativeEvents) e._nativeEvents[a] = !0
                    }
                    e.bindPendingEvents(), t.style && (n = e.getEl(), n && (n.setAttribute("style", t.style), n.style.cssText = t.style)), e._visible || r.css(e.getEl(), "display", "none"), e.settings.border && (i = e.borderBox(), r.css(e.getEl(), {
                        "border-top-width": i.top,
                        "border-right-width": i.right,
                        "border-bottom-width": i.bottom,
                        "border-left-width": i.left
                    })), u.controlIdLookup[e._id] = e;
                    for (var l in e._aria) e.aria(l, e._aria[l]);
                    e.fire("postrender", {}, !1)
                },
                scrollIntoView: function (e) {
                    function t(e, t) {
                        var n, i, r = e;
                        for (n = i = 0; r && r != t && r.nodeType;) n += r.offsetLeft || 0, i += r.offsetTop || 0, r = r.offsetParent;
                        return {
                            x: n,
                            y: i
                        }
                    }
                    var n = this.getEl(),
                        i = n.parentNode,
                        r, o, a, s, l, u, c = t(n, i);
                    r = c.x, o = c.y, a = n.offsetWidth, s = n.offsetHeight, l = i.clientWidth, u = i.clientHeight, "end" == e ? (r -= l - a, o -= u - s) : "center" == e && (r -= l / 2 - a / 2, o -= u / 2 - s / 2), i.scrollLeft = r, i.scrollTop = o
                },
                bindPendingEvents: function () {
                    function e(e) {
                        var t = o.getParentCtrl(e.target);
                        t && t.fire(e.type, e)
                    }

                    function t() {
                        var e = d._lastHoverCtrl;
                        e && (e.fire("mouseleave", {
                            target: e.getEl()
                        }), e.parents().each(function (e) {
                            e.fire("mouseleave", {
                                target: e.getEl()
                            })
                        }), d._lastHoverCtrl = null)
                    }

                    function n(e) {
                        var t = o.getParentCtrl(e.target),
                            n = d._lastHoverCtrl,
                            i = 0,
                            r, a, s;
                        if (t !== n) {
                            if (d._lastHoverCtrl = t, a = t.parents().toArray().reverse(), a.push(t), n) {
                                for (s = n.parents().toArray().reverse(), s.push(n), i = 0; s.length > i && a[i] === s[i]; i++);
                                for (r = s.length - 1; r >= i; r--) n = s[r], n.fire("mouseleave", {
                                    target: n.getEl()
                                })
                            }
                            for (r = i; a.length > r; r++) t = a[r], t.fire("mouseenter", {
                                target: t.getEl()
                            })
                        }
                    }

                    function i(e) {
                        e.preventDefault(), "mousewheel" == e.type ? (e.deltaY = -1 / 40 * e.wheelDelta, e.wheelDeltaX && (e.deltaX = -1 / 40 * e.wheelDeltaX)) : (e.deltaX = 0, e.deltaY = e.detail), e = o.fire("wheel", e)
                    }
                    var o = this,
                        a, u, c, d, f, p;
                    if (o._rendered = !0, f = o._nativeEvents) {
                        for (c = o.parents().toArray(), c.unshift(o), a = 0, u = c.length; !d && u > a; a++) d = c[a]._eventsRoot;
                        for (d || (d = c[c.length - 1] || o), o._eventsRoot = d, u = a, a = 0; u > a; a++) c[a]._eventsRoot = d;
                        for (p in f) {
                            if (!f) return !1;
                            "wheel" !== p || l ? ("mouseenter" === p || "mouseleave" === p ? d._hasMouseEnter || (r.on(d.getEl(), "mouseleave", t), r.on(d.getEl(), "mouseover", n), d._hasMouseEnter = 1) : d[p] || (r.on(d.getEl(), p, e), d[p] = !0), f[p] = !1) : s ? r.on(o.getEl(), "mousewheel", i) : r.on(o.getEl(), "DOMMouseScroll", i)
                        }
                    }
                },
                reflow: function () {
                    return this.repaint(), this
                }
            });
        return u
    }), i(x, [g], function (e) {
        return {
            moveRel: function (t, n) {
                var i = this,
                    r, o, a, s, l, u, c, d;
                return o = e.getPos(t), a = o.x, s = o.y, r = i.getEl(), l = r.offsetWidth, u = r.offsetHeight, c = t.offsetWidth, d = t.offsetHeight, n = (n || "").split(""), "b" === n[0] && (s += d), "r" === n[1] && (a += c), "c" === n[0] && (s += Math.round(d / 2)), "c" === n[1] && (a += Math.round(c / 2)), "b" === n[3] && (s -= u), "r" === n[4] && (a -= l), "c" === n[3] && (s -= Math.round(u / 2)), "c" === n[4] && (a -= Math.round(l / 2)), i.moveTo(a, s), i
            },
            moveBy: function (e, t) {
                var n = this,
                    i = n.layoutRect();
                return n.moveTo(i.x + e, i.y + t), n
            },
            moveTo: function (t, n) {
                function i(e, t, n) {
                    return 0 > e ? 0 : e + n > t ? (e -= n, 0 > e ? 0 : e) : e
                }
                var r = this;
                if (r.settings.contrainToViewport) {
                    var o = e.getViewPort(window),
                        a = r.layoutRect();
                    t = i(t, o.w + o.x, a.w), n = i(n, o.h + o.y, a.h)
                }
                return r._rendered ? r.layoutRect({
                    x: t,
                    y: n
                }).repaint() : (r.settings.x = t, r.settings.y = n), r
            }
        }
    }), i(y, [v, x], function (e, n) {
        return e.extend({
            Mixins: [n],
            Defaults: {
                classes: "widget tooltip tooltip-n"
            },
            text: function (e) {
                var n = this;
                return e !== t ? (n._value = e, n._rendered && (n.getEl().lastChild.innerHTML = n.encode(e)), n) : n._value
            },
            renderHtml: function () {
                var e = this,
                    t = e.classPrefix;
                return '<div id="' + e._id + '" class="' + e.classes() + '" role="presentation">' + '<div class="' + t + 'tooltip-arrow"></div>' + '<div class="' + t + 'tooltip-inner">' + e.encode(e._text) + "</div>" + "</div>"
            },
            repaint: function () {
                var e = this,
                    t, n;
                t = e.getEl().style, n = e._layoutRect, t.left = n.x + "px", t.top = n.y + "px", t.zIndex = 131070
            }
        })
    }), i(b, [v, y], function (e, t) {
        var n;
        return e.extend({
            init: function (e) {
                var t = this;
                t._super(e), t.canFocus = !0, e.tooltip && t.on("mouseenter mouseleave", function (n) {
                    n.control == t && "mouseenter" == n.type ? t.tooltip().moveTo(-65535).text(e.tooltip).show().moveRel(t.getEl(), "bc tc") : t.tooltip().moveTo(-65535).hide()
                }), t.aria("label", e.tooltip)
            },
            tooltip: function () {
                var e = this;
                return n || (n = new t({
                    type: "tooltip"
                }), n.renderTo(e.getContainerElm())), n
            },
            active: function (e) {
                var t = this,
                    n;
                return e !== n && (t.aria("pressed", e), t.toggleClass("active", e)), t._super(e)
            },
            disabled: function (e) {
                var t = this,
                    n;
                return e !== n && (t.aria("disabled", e), t.toggleClass("disabled", e)), t._super(e)
            },
            postRender: function () {
                var e = this,
                    t = e.settings;
                e._rendered = !0, e._super(), e.parent() || !t.width && !t.height || (e.initLayoutRect(), e.repaint()), t.autofocus && setTimeout(function () {
                    e.focus()
                }, 0)
            },
            remove: function () {
                this._super(), n && (n.remove(), n = null)
            }
        })
    }), i(w, [b], function (e) {
        return e.extend({
            Defaults: {
                classes: "widget btn",
                role: "button"
            },
            init: function (e) {
                var t = this,
                    n;
                t.on("click mousedown", function (e) {
                    e.preventDefault()
                }), t._super(e), n = e.size, e.subtype && t.addClass(e.subtype), n && t.addClass("btn-" + n)
            },
            repaint: function () {
                var e = this.getEl().firstChild.style;
                e.width = e.height = "100%", this._super()
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.classPrefix,
                    i = e.settings.icon ? n + "ico " + n + "i-" + e.settings.icon : "",
                    r = e.settings.image ? " style=\"background-image: url('" + e.settings.image + "')\"" : "";
                return '<div id="' + t + '" class="' + e.classes() + '" tabindex="-1">' + '<button role="presentation" tabindex="-1">' + (i ? '<i class="' + i + '"' + r + "></i>" : "") + (e._text ? (i ? " " : "") + e.encode(e._text) : "") + "</button>" + "</div>"
            }
        })
    }), i(_, [], function () {
        var e = {}, t;
        return {
            add: function (t, n) {
                e[t.toLowerCase()] = n
            },
            has: function (t) {
                return !!e[t.toLowerCase()]
            },
            create: function (n, i) {
                var r, o, a;
                if (!t) {
                    a = moxman.ui;
                    for (o in a) e[o.toLowerCase()] = a[o];
                    t = !0
                }
                if ("string" == typeof n ? (i = i || {}, i.type = n) : (i = n, n = i.type), n = n.toLowerCase(), r = e[n], !r) throw Error("Could not find control by type: " + n);
                return r = new r(i), r.type = n, r
            }
        }
    }), i(E, [v, h, p, _, l, g], function (e, n, i, r, o, a) {
        var s = {};
        return e.extend({
            layout: "",
            innerClass: "container-inner",
            init: function (e) {
                var t = this;
                t._super(e), e = t.settings, t._items = new n, t.addClass("container"), t.addClass("container-body", "body"), e.containerCls && t.addClass(e.containerCls), t._layout = r.create((e.layout || t.layout) + "layout"), t.settings.items && t.add(t.settings.items), t._hasBody = !0
            },
            items: function () {
                return this._items
            },
            find: function (e) {
                return e = s[e] = s[e] || new i(e), e.find(this)
            },
            add: function (e) {
                var t = this;
                return t.items().add(t.create(e)).parent(t), t
            },
            focus: function () {
                var e = this;
                return e.keyNav ? e.keyNav.focusFirst() : e._super(), e
            },
            replace: function (e, t) {
                for (var n, i = this.items(), r = i.length; r--;)
                    if (i[r] === e) {
                        i[r] = t;
                        break
                    }
                r >= 0 && (n = t.getEl(), n && n.parentNode.removeChild(n), n = e.getEl(), n && n.parentNode.removeChild(n)), t.parent(this)
            },
            create: function (t) {
                var n = this,
                    i, a = [];
                return o.isArray(t) || (t = [t]), o.each(t, function (t) {
                    null !== t && (t instanceof e || ("string" == typeof t && (t = {
                        type: t
                    }), i = o.extend({}, n.settings.defaults, t), t.type = i.type = i.type || t.type || n.settings.defaultType || (i.defaults ? i.defaults.type : null), t = r.create(i)), a.push(t))
                }), a
            },
            renderNew: function () {
                var e = this;
                return e.items().each(function (t, n) {
                    var i, r;
                    t.parent(e), t._rendered || (i = e.getEl("body"), r = a.createFragment(t.renderHtml()), i.hasChildNodes() && i.childNodes.length - 1 >= n ? i.insertBefore(r, i.childNodes[n]) : i.appendChild(r), t.postRender())
                }), e._layout.applyClasses(e), e._lastRect = null, e
            },
            append: function (e) {
                return this.add(e).renderNew()
            },
            prepend: function (e) {
                var t = this;
                return t.items().set(t.create(e).concat(t.items().toArray())), t.renderNew()
            },
            insert: function (e, t, n) {
                var i = this,
                    r, o, a;
                return e = i.create(e), r = i.items(), n || (t += 1), t >= 0 && r.length > t && (o = r.slice(0, t).toArray(), a = r.slice(t).toArray(), r.set(o.concat(e, a))), i.renderNew()
            },
            preRender: function () {},
            renderHtml: function () {
                var e = this,
                    t = e._layout;
                return e.preRender(), t.preRender(e), '<div id="' + e._id + '" class="' + e.classes() + '" role="' + this.settings.role + '">' + '<div id="' + e._id + '-body" class="' + e.classes("body") + '">' + (e.settings.html || "") + t.renderHtml(e) + "</div>" + "</div>"
            },
            postRender: function () {
                var e = this,
                    t;
                return e.items().exec("postRender"), e._super(), e._layout.postRender(e), e._rendered = !0, e.settings.style && a.css(e.getEl(), e.settings.style), e.settings.border && (t = e.borderBox(), a.css(e.getEl(), {
                    "border-top-width": t.top,
                    "border-right-width": t.right,
                    "border-bottom-width": t.bottom,
                    "border-left-width": t.left
                })), e
            },
            initLayoutRect: function () {
                var e = this,
                    t = e._super();
                return e._layout.recalc(e), t
            },
            recalc: function () {
                var e = this,
                    n = e._layoutRect,
                    i = e._lastRect;
                return i && i.w == n.w && i.h == n.h ? t : (e._layout.recalc(e), n = e.layoutRect(), e._lastRect = {
                    x: n.x,
                    y: n.y,
                    w: n.w,
                    h: n.h
                }, !0)
            },
            reflow: function () {
                var t, n;
                if (this.visible()) {
                    for (e.repaintControls = [], e.repaintControls.map = {}, n = this.recalc(), t = e.repaintControls.length; t--;) e.repaintControls[t].repaint();
                    "flow" !== this.settings.layout && "stack" !== this.settings.layout && this.repaint(), e.repaintControls = []
                }
                return this
            }
        })
    }), i(C, [E], function (e) {
        return e.extend({
            Defaults: {
                defaultType: "button",
                role: "toolbar"
            },
            renderHtml: function () {
                var e = this,
                    t = e._layout;
                return e.addClass("btn-group"), e.preRender(), t.preRender(e), '<div id="' + e._id + '" class="' + e.classes() + '">' + '<div id="' + e._id + '-body">' + (e.settings.html || "") + t.renderHtml(e) + "</div>" + "</div>"
            }
        })
    }), i(R, [b], function (e) {
        return e.extend({
            Defaults: {
                classes: "carousel",
                checked: !1
            },
            init: function (e) {
                var t = this;
                t._super(e), t._data = e.data, t._index = 0, t._first = !0, t.on("click", function (e) {
                    var n = e.target.className; - 1 != n.indexOf("prev") && t.prev(), -1 != n.indexOf("next") && t.next()
                })
            },
            data: function (e) {
                this._data = e
            },
            index: function (e, n) {
                function i(e) {
                    var t, i = r.getEl("view");
                    i.firstChild && i.removeChild(i.firstChild), t = new Image, t.id = r._id + "-img", t.className = r.classPrefix + "object", t.onload = function () {
                        var e = 50,
                            o = i.clientWidth - e,
                            a = i.clientHeight - e,
                            s = t.clientWidth,
                            l = t.clientHeight,
                            u = Math.min(o / s, a / l);
                        1 > u && (s *= u, l *= u, t.style.width = s + "px", t.style.height = l + "px"), t.style.left = e / 2 + (o / 2 - s / 2) + "px", t.style.top = e / 2 + (a / 2 - l / 2) + "px", t.style.visibility = "visible", r._first = !r._first, n && n()
                    }, t.style.width = t.style.height = "", t.src = e, i.appendChild(t)
                }
                var r = this;
                return e !== t ? (e >= 0 && this._data.length - 1 >= e && (r.getEl().firstChild.style.display = e > 0 ? "block" : "none", r.getEl().childNodes[1].style.display = r._data.length - 1 > e ? "block" : "none", i(this._data[e].url), r.fire("change", {
                    index: e,
                    lastIndex: r._index
                }), r._index = e), r) : r._index
            },
            prev: function () {
                this.index(this.index() - 1)
            },
            next: function () {
                this.index(this.index() + 1)
            },
            postRender: function () {
                var e = this;
                e._super(), e.index(e.settings.selectedIndex || 0)
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.classPrefix;
                return '<div id="' + t + '" class="' + e.classes() + '">' + '<div class="' + n + "dir " + n + 'prev" unselectable="true">&lsaquo;</div>' + '<div class="' + n + "dir " + n + 'next" unselectable="true">&rsaquo;</div>' + '<div id="' + t + '-view" class="' + n + 'view"></div>' + "</div>"
            }
        })
    }), i(T, [b], function (e) {
        return e.extend({
            Defaults: {
                classes: "checkbox",
                role: "checkbox",
                checked: !1
            },
            init: function (e) {
                var t = this;
                t._super(e), t.on("click mousedown", function (e) {
                    e.preventDefault()
                }), t.on("click", function (e) {
                    e.preventDefault(), t.disabled() || t.checked(!t.checked())
                }), t.checked(t.settings.checked)
            },
            checked: function (e) {
                var n = this;
                return e !== t ? (e ? n.addClass("checked") : n.removeClass("checked"), n._checked = e, n.aria("checked", e), n) : n._checked
            },
            value: function (e) {
                return this.checked(e)
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.classPrefix;
                return '<div id="' + t + '" class="' + e.classes() + '" unselectable="on" aria-labeledby="' + t + '-al" tabindex="-1">' + '<i class="' + n + "ico " + n + 'i-checkbox"></i>' + '<span id="' + t + '-al" class="' + n + 'label">' + e.encode(e._text) + "</span>" + "</div>"
            }
        })
    }), i(A, [E], function (e) {
        return e.extend({})
    }), i(k, [g], function (e) {
        function n() {
            var e = document,
                t, n, i, r, o, a, s, l, u = Math.max;
            return t = e.documentElement, n = e.body, i = u(t.scrollWidth, n.scrollWidth), r = u(t.clientWidth, n.clientWidth), o = u(t.offsetWidth, n.offsetWidth), a = u(t.scrollHeight, n.scrollHeight), s = u(t.clientHeight, n.clientHeight), l = u(t.offsetHeight, n.offsetHeight), {
                width: o > i ? r : i,
                height: l > a ? s : a
            }
        }
        return function (i, r) {
            function o() {
                return s.getElementById(r.handle || i)
            }
            var a, s = document,
                l, u, c, d, f, p;
            r = r || {}, u = function (t) {
                var i = n(),
                    u, h;
                t.preventDefault(), l = t.button, u = o(), f = t.screenX, p = t.screenY, h = window.getComputedStyle ? window.getComputedStyle(u, null).getPropertyValue("cursor") : u.runtimeStyle.cursor, a = s.createElement("div"), e.css(a, {
                    position: "absolute",
                    top: 0,
                    left: 0,
                    width: i.width,
                    height: i.height,
                    zIndex: 65535,
                    opacity: 1e-4,
                    background: "red",
                    cursor: h
                }), s.body.appendChild(a), e.on(s, "mousemove", d), e.on(s, "mouseup", c), r.start(t)
            }, d = function (e) {
                return e.button !== l ? c(e) : (e.deltaX = e.screenX - f, e.deltaY = e.screenY - p, e.preventDefault(), r.drag(e), t)
            }, c = function (t) {
                e.off(s, "mousemove", d), e.off(s, "mouseup", c), a.parentNode.removeChild(a), r.stop && r.stop(t)
            }, this.destroy = function () {
                e.off(o())
            }, e.on(o(), "mousedown", u)
        }
    }), i(S, [g, k], function (e, n) {
        return {
            init: function () {
                var e = this;
                e.on("repaint", e.renderScroll)
            },
            renderScroll: function () {
                function i() {
                    function n(n, s, l, u, c, d) {
                        var f, p, h, m, g, v, x, y, b;
                        if (p = o.getEl("scroll" + n)) {
                            if (y = s.toLowerCase(), b = l.toLowerCase(), o.getEl("absend") && e.css(o.getEl("absend"), y, o.layoutRect()[u] - 1), !c) return e.css(p, "display", "none"), t;
                            e.css(p, "display", "block"), f = o.getEl("body"), h = o.getEl("scroll" + n + "t"), m = f["client" + l] - 2 * a, m -= i && r ? p["client" + d] : 0, g = f["scroll" + l], v = m / g, x = {}, x[y] = f["offset" + s] + a, x[b] = m, e.css(p, x), x = {}, x[y] = f["scroll" + s] * v, x[b] = m * v, e.css(h, x)
                        }
                    }
                    var i, r, s;
                    s = o.getEl("body"), i = s.scrollWidth > s.clientWidth, r = s.scrollHeight > s.clientHeight, n("h", "Left", "Width", "contentW", i, "Height"), n("v", "Top", "Height", "contentH", r, "Width")
                }

                function r() {
                    function t(t, i, r, s, l) {
                        var u, c = o._id + "-scroll" + t,
                            d = o.classPrefix;
                        o.getEl().appendChild(e.createFragment('<div id="' + c + '" class="' + d + "scrollbar " + d + "scrollbar-" + t + '">' + '<div id="' + c + 't" class="' + d + 'scrollbar-thumb"></div>' + "</div>")), o.draghelper = new n(c + "t", {
                            start: function () {
                                u = o.getEl("body")["scroll" + i], e.addClass(e.get(c), d + "active")
                            },
                            drag: function (e) {
                                var n, c, d, f, p = o.layoutRect();
                                c = p.contentW > p.innerW, d = p.contentH > p.innerH, f = o.getEl("body")["client" + r] - 2 * a, f -= c && d ? o.getEl("scroll" + t)["client" + l] : 0, n = f / o.getEl("body")["scroll" + r], o.getEl("body")["scroll" + i] = u + e["delta" + s] / n
                            },
                            stop: function () {
                                e.removeClass(e.get(c), d + "active")
                            }
                        })
                    }
                    o.addClass("scroll"), t("v", "Top", "Height", "Y", "Width"), t("h", "Left", "Width", "X", "Height")
                }
                var o = this,
                    a = 2;
                o.settings.autoScroll && (o._hasScroll || (o._hasScroll = !0, r(), o.on("wheel", function (e) {
                    var t = o.getEl("body");
                    t.scrollLeft += 10 * (e.deltaX || 0), t.scrollTop += 10 * e.deltaY, i()
                }), e.on(o.getEl("body"), "scroll", i)), i())
            }
        }
    }), i(D, [E, S], function (e, n) {
        var i = e.extend({
            Defaults: {
                layout: "fit",
                containerCls: "panel"
            },
            Mixins: [n],
            fromJSON: function (e) {
                var t = this;
                for (var n in e) t.find("#" + n).value(e[n]);
                return t
            },
            toJSON: function () {
                var e = this,
                    n = {};
                return e.find("*").each(function (e) {
                    var i = e.name(),
                        r = e.value();
                    i && r !== t && (n[i] = r)
                }), n
            },
            renderHtml: function () {
                var e = this,
                    n = e._layout,
                    i = e.settings.html;
                return e.preRender(), n.preRender(e), i === t ? i = '<div id="' + e._id + '-body" class="' + e.classes("body") + '">' + n.renderHtml(e) + "</div>" : ("function" == typeof i && (i = i()), e._hasBody = !1), '<div id="' + e._id + '" class="' + e.classes() + '" hideFocus="1" tabIndex="-1">' + (e._preBodyHtml || "") + i + "</div>"
            }
        });
        return i
    }), i(F, [g], function (e) {
        return {
            resizeToContent: function () {
                this._layoutRect.autoResize = !0, this._lastRect = null, this.reflow()
            },
            resizeTo: function (t, n) {
                if (1 >= t || 1 >= n) {
                    var i = e.getWindowSize();
                    t = 1 >= t ? t * i.w : t, n = 1 >= n ? n * i.h : n
                }
                return this._layoutRect.autoResize = !1, this.layoutRect({
                    minW: t,
                    minH: n,
                    w: t,
                    h: n
                }).reflow()
            },
            resizeBy: function (e, t) {
                var n = this,
                    i = n.layoutRect();
                return n.resizeTo(i.w + e, i.h + t)
            }
        }
    }), i(I, [D, x, F, g], function (e, t, n, i) {
        var r, o = [],
            a = [],
            s, l = e.extend({
                Mixins: [t, n],
                init: function (e) {
                    function t() {
                        var e, t = l.zIndex || 65535,
                            n;
                        if (a.length)
                            for (e = 0; a.length > e; e++) a[e].modal && (t++, n = a[e]), a[e].getEl().style.zIndex = t, a[e].zIndex = t, t++;
                        var r = document.getElementById(u.classPrefix + "modal-block");
                        n ? i.css(r, "z-index", n.zIndex - 1) : r && (r.parentNode.removeChild(r), s = !1), l.currentZIndex = t
                    }

                    function n(e, t) {
                        for (; e;) {
                            if (e == t) return !0;
                            e = e.parent()
                        }
                    }
                    var u = this;
                    u._super(e), u._eventsRoot = u, u.addClass("floatpanel"), e.autohide && (r || (r = function (e) {
                        var t, i = u.getParentCtrl(e.target);
                        for (t = o.length; t--;)(!i || !n(i, o[t]) && o[t].parent() !== i) && o[t].hide()
                    }, i.on(document, "click", r)), o.push(u)), u.on("postrender show", function (e) {
                        if (e.control == u) {
                            var n, r = u.classPrefix;
                            u.modal && !s && (n = i.createFragment('<div id="' + r + 'modal-block" class="' + r + "reset " + r + 'fade"></div>'), n = n.firstChild, u.getContainerElm().appendChild(n), setTimeout(function () {
                                i.addClass(n, r + "in"), i.addClass(u.getEl(), r + "in")
                            }, 0), s = !0), a.push(u), t()
                        }
                    }), u.on("close hide", function (e) {
                        if (e.control == u) {
                            for (var n = a.length; n--;) a[n] === u && a.splice(n, 1);
                            t()
                        }
                    }), e.popover && (u._preBodyHtml = '<div class="' + u.classPrefix + 'arrow"></div>', u.addClass("popover").addClass("bottom").addClass("start"))
                },
                show: function () {
                    var e = this,
                        t, n = e._super();
                    for (t = o.length; t-- && o[t] !== e;);
                    return e.settings.autohide && -1 === t && o.push(e), n
                },
                hide: function () {
                    var e;
                    for (e = o.length; e--;) o[e] === this && o.splice(e, 1);
                    return this._super()
                },
                hideAll: function () {
                    l.hideAll()
                },
                close: function () {
                    var e = this;
                    return e.fire("close"), e.remove()
                },
                remove: function () {
                    var e = this;
                    e._super()
                }
            });
        return l.hideAll = function () {
            for (var e = o.length; e--;) o[e].fire("cancel", {}, !1), o[e].hide(), o.splice(e, 1)
        }, l
    }), i(M, [g], function (e) {
        return function (n) {
            function i() {
                if (!m)
                    if (m = [], f.find) f.find("*").each(function (e) {
                        e.canFocus && m.push(e.getEl())
                    });
                    else
                        for (var e = f.getEl().getElementsByTagName("*"), t = 0; e.length > t; t++) e[t].id && e[t] && m.push(e[t])
            }

            function r() {
                return document.getElementById(g)
            }

            function o(e) {
                return e = e || r(), e && e.getAttribute("role")
            }

            function a(e) {
                for (var t, n = e || r(); n = n.parentNode;)
                    if (t = o(n)) return t
            }

            function s(e) {
                var n = document.getElementById(g);
                return n ? n.getAttribute("aria-" + e) : t
            }

            function l() {
                var t = r();
                if (!t || "TEXTAREA" != t.nodeName && "text" != t.type) return n.onAction ? n.onAction(g) : e.fire(r(), "click", {
                    keyboard: !0
                }), !0
            }

            function u() {
                var e;
                n.onCancel ? ((e = r()) && e.blur(), n.onCancel()) : n.root.fire("cancel")
            }

            function c(e) {
                var t = -1,
                    r, o;
                for (i(), o = m.length; o--;)
                    if (m[o].id === g) {
                        t = o;
                        break
                    }
                t += e, 0 > t ? t = m.length - 1 : t >= m.length && (t = 0), r = m[t], r.focus(), g = r.id, n.actOnFocus && l()
            }

            function d() {
                var e, r;
                for (r = o(n.root.getEl()), i(), e = m.length; e--;)
                    if ("toolbar" == r && m[e].id === g) return m[e].focus(), t;
                m[0].focus()
            }
            var f = n.root,
                p = n.enableUpDown !== !1,
                h = n.enableLeftRight !== !1,
                m = n.items,
                g;
            return f.on("keydown", function (e) {
                var t = 37,
                    i = 39,
                    r = 38,
                    d = 40,
                    f = 27,
                    m = 14,
                    g = 13,
                    v = 32,
                    x = 9,
                    y;
                switch (e.keyCode) {
                case t:
                    h && (n.leftAction ? n.leftAction() : c(-1), y = !0);
                    break;
                case i:
                    h && ("menuitem" == o() && "menu" == a() ? s("haspopup") && l() : c(1), y = !0);
                    break;
                case r:
                    p && (c(-1), y = !0);
                    break;
                case d:
                    p && ("menuitem" == o() && "menubar" == a() ? l() : "button" == o() && s("haspopup") ? l() : c(1), y = !0);
                    break;
                case x:
                    y = !0, e.shiftKey ? c(-1) : c(1);
                    break;
                case f:
                    y = !0, u();
                    break;
                case m:
                case g:
                case v:
                    y = l()
                }
                y && (e.stopPropagation(), e.preventDefault())
            }), f.on("focusin", function (e) {
                i(), g = e.target.id
            }), {
                moveFocus: c,
                focusFirst: d,
                cancel: u
            }
        }
    }), i(N, [w, I, M], function (e, t, n) {
        function i() {
            var e, t = [],
                n;
            for (n = ["000000", "Black", "993300", "Burnt orange", "333300", "Dark olive", "003300", "Dark green", "003366", "Dark azure", "000080", "Navy Blue", "333399", "Indigo", "333333", "Very dark gray", "800000", "Maroon", "FF6600", "Orange", "808000", "Olive", "008000", "Green", "008080", "Teal", "0000FF", "Blue", "666699", "Grayish blue", "808080", "Gray", "FF0000", "Red", "FF9900", "Amber", "99CC00", "Yellow green", "339966", "Sea green", "33CCCC", "Turquoise", "3366FF", "Royal blue", "800080", "Purple", "999999", "Medium gray", "FF00FF", "Magenta", "FFCC00", "Gold", "FFFF00", "Yellow", "00FF00", "Lime", "00FFFF", "Aqua", "00CCFF", "Sky blue", "993366", "Brown", "C0C0C0", "Silver", "FF99CC", "Pink", "FFCC99", "Peach", "FFFF99", "Light yellow", "CCFFCC", "Pale green", "CCFFFF", "Pale cyan", "99CCFF", "Light sky blue", "CC99FF", "Plum", "FFFFFF", "White"], e = 0; n.length > e; e += 2) t.push({
                text: n[e + 1],
                color: n[e]
            });
            return t
        }
        return e.extend({
            init: function (e) {
                var t = this;
                t._super(e), t.addClass("colorbutton"), t.on("click", function (e) {
                    e.control == t && t.showPicker()
                }), t.hasPopup = !0
            },
            showPicker: function () {
                var e = this,
                    r = "",
                    o, a, s, l = e.classPrefix,
                    u;
                if (!e.picker) {
                    for (u = i(), r = '<table class="' + l + "grid " + l + 'colorbutton-grid" role="presentation" cellspacing="0"><tbody>', o = Math.ceil(Math.sqrt(u.length)), s = 0; 5 > s; s++) {
                        for (r += "<tr>", a = 0; 8 > a; a++) {
                            var c = u[8 * s + a];
                            r += '<td><div id="' + e._id + "-" + (8 * s + a) + '"' + ' data-mce-color="' + c.color + '"' + ' role="option"' + ' tabIndex="-1"' + ' style="' + (c ? "background-color: #" + c.color : "") + '"' + ' title="' + c.text + '">' + "</div>" + "</td>"
                        }
                        r += "</tr>"
                    }
                    r += "</tbody></table>", e.picker = new t({
                        popover: !0,
                        autohide: !0,
                        html: r,
                        border: 1,
                        classes: "colorpicker"
                    }).parent(e).renderTo(e.getContainerElm()), e.picker._hasBody = !1, e.picker.reflow(), e.picker.parent(e), e.picker.on("cancel", function (t) {
                        t.control === e.menu && e.focus()
                    }), e.picker.on("click", function (t) {
                        var n;
                        (n = t.target.getAttribute("data-mce-color")) && (e.picker.hide(), n = "#" + n, e.showPreview(n), e.fire("select", {
                            value: n
                        }))
                    }), e.keyboardNavigation = new n({
                        root: e.picker,
                        items: e.picker.getEl().getElementsByTagName("div"),
                        onCancel: function () {
                            e.picker.hide(), e.fire("cancel")
                        }
                    })
                }
                e.picker.show(), e.picker.moveRel(e.getEl(), "bc-tl"), e.keyboardNavigation.focusFirst()
            },
            showPreview: function (e) {
                this.getEl("preview").style.backgroundColor = e
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.classPrefix,
                    i = e.settings.icon ? n + "ico " + n + "i-" + e.settings.icon : "",
                    r = e.settings.image ? " style=\"background-image: url('" + e.settings.image + "')\"" : "";
                return '<div id="' + t + '" class="' + e.classes() + '" tabindex="-1">' + '<button role="presentation" tabindex="-1">' + (i ? '<i class="' + i + '"' + r + "></i>" : "") + '<span id="' + t + '-preview" class="' + n + 'preview"></span>' + (e._text ? (i ? " " : "") + e.encode(e._text) : "") + "</button>" + "</div>"
            }
        })
    }), i(H, [b, g], function (e, n) {
        return e.extend({
            init: function (e) {
                var i = this;
                i._super(e), i.addClass("combobox"), i.on("click", function (e) {
                    for (var t = e.target; t;) t.id && -1 != t.id.indexOf("-open") && i.fire("action"), t = t.parentNode
                }), i.on("keydown", function (e) {
                    "INPUT" == e.target.nodeName && 13 == e.keyCode && i.parents().reverse().each(function (n) {
                        return e.preventDefault(), i.fire("change"), n.submit ? (n.submit(), !1) : t
                    })
                }), e.placeholder && (i.addClass("placeholder"), i.on("focusin", function () {
                    i._hasOnChange || (n.on(i.getEl("inp"), "change", function () {
                        i.fire("change")
                    }), i._hasOnChange = !0), i.hasClass("placeholder") && (i.getEl("inp").value = "", i.removeClass("placeholder"))
                }), i.on("focusout", function () {
                    0 === i.value().length && (i.getEl("inp").value = e.placeholder, i.addClass("placeholder"))
                }))
            },
            value: function (e) {
                var n = this;
                return e !== t ? (n._value = e, n.removeClass("placeholder"), n._rendered && (n.getEl("inp").value = e), n) : n._rendered ? (e = n.getEl("inp").value, e != n.settings.placeholder ? e : "") : n._value
            },
            repaint: function () {
                var e = this,
                    t = e.getEl(),
                    i = e.getEl("open"),
                    r = e.layoutRect();
                return i ? n.css(t.firstChild, {
                    width: r.w - i.offsetWidth - 10
                }) : n.css(t.firstChild, {
                    width: r.w - 10
                }), e._super(), e
            },
            disabled: function (e) {
                var t = this;
                t._super(e), t._rendered && (t.getEl().disabled = e)
            },
            focus: function () {
                this.getEl("inp").focus()
            },
            postRender: function () {
                var e = this;
                return n.on(this.getEl("inp"), "change", function () {
                    e.fire("change")
                }), e._super()
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.settings,
                    i = e.classPrefix,
                    r = n.value || n.placeholder || "",
                    o, a, s = "";
                return o = n.icon ? i + "ico " + i + "i-" + n.icon : "", a = e._text, (o || a) && (s = '<div id="' + t + '-open" class="' + i + "btn " + i + 'open" tabIndex="-1">' + '<button id="' + t + '-action" hidefocus tabindex="-1">' + (o ? '<i class="' + o + '"></i>' : '<i class="' + i + 'caret"></i>') + (a ? (o ? " " : "") + a : "") + "</button>" + "</div>", e.addClass("has-open")), '<div id="' + t + '" class="' + e.classes() + '">' + '<input id="' + t + '-inp" class="' + i + "textbox " + i + 'placeholder" value="' + r + '" hidefocus="true">' + s + "</div>"
            }
        })
    }), i(P, [E], function (e) {
        return e.extend({
            Defaults: {
                layout: "flex",
                align: "center",
                defaults: {
                    flex: 1
                }
            },
            renderHtml: function () {
                var e = this,
                    t = e._layout,
                    n = e.classPrefix;
                return e.addClass("formitem"), t.preRender(e), '<div id="' + e._id + '" class="' + e.classes() + '" hideFocus="1" tabIndex="-1">' + (e.settings.title ? '<div id="' + e._id + '-title" class="' + n + 'title">' + e.settings.title + "</div>" : "") + '<div id="' + e._id + '-body" class="' + e.classes("body") + '">' + (e.settings.html || "") + t.renderHtml(e) + "</div>" + "</div>"
            }
        })
    }), i(O, [E, P], function (e, n) {
        return e.extend({
            Defaults: {
                containerCls: "form",
                layout: "flex",
                direction: "column",
                align: "stretch",
                flex: 1,
                padding: 20,
                labelGap: 30,
                spacing: 10
            },
            preRender: function () {
                var e = this,
                    i = e.items();
                i.each(function (i) {
                    var r, o = i.settings.label;
                    o && (r = new n({
                        layout: "flex",
                        autoResize: "overflow",
                        defaults: {
                            flex: 1
                        },
                        items: [{
                            type: "label",
                            text: o,
                            flex: 0,
                            forId: i._id
                        }]
                    }), r.type = "formitem", i.settings.flex === t && (i.settings.flex = 1), e.replace(i, r), r.add(i))
                })
            },
            recalcLabels: function () {
                var e = this,
                    t = 0,
                    n = [],
                    i, r;
                if (e.settings.labelGapCalc !== !1)
                    for (e.items().filter("formitem").each(function (e) {
                        var i = e.items()[0],
                            r = i.getEl().clientWidth;
                        t = r > t ? r : t, n.push(i)
                    }), r = e.settings.labelGap || 0, i = n.length; i--;) n[i].settings.minWidth = t + r
            },
            visible: function (e) {
                var t = this._super(e);
                return e === !0 && this._rendered && this.recalcLabels(), t
            },
            fromJSON: function (e) {
                var t = this;
                if (e)
                    for (var n in e) t.find("#" + n).value(e[n]);
                return t
            },
            toJSON: function () {
                var e = this,
                    n = {};
                return e.find("*").each(function (e) {
                    var i = e.name(),
                        r = e.value();
                    i && r !== t && (n[i] = r)
                }), n
            },
            submit: function () {
                return this.fire("submit", {
                    data: this.toJSON()
                })
            },
            postRender: function () {
                var e = this;
                e._super(), e.recalcLabels(), e.fromJSON(e.settings.data)
            }
        })
    }), i(L, [O], function (e) {
        return e.extend({
            Defaults: {
                containerCls: "fieldset",
                layout: "flex",
                direction: "column",
                align: "stretch",
                flex: 1,
                padding: "25 15 5 15",
                labelGap: 30,
                spacing: 10,
                border: 1
            },
            renderHtml: function () {
                var e = this,
                    t = e._layout,
                    n = e.classPrefix;
                return e.preRender(), t.preRender(e), '<fieldset id="' + e._id + '" class="' + e.classes() + '" hideFocus="1" tabIndex="-1">' + (e.settings.title ? '<legend id="' + e._id + '-title" class="' + n + 'fieldset-title">' + e.settings.title + "</legend>" : "") + '<div id="' + e._id + '-body" class="' + e.classes("body") + '">' + (e.settings.html || "") + t.renderHtml(e) + "</div>" + "</fieldset>"
            }
        })
    }), i(W, [d], function (e) {
        return e.extend({
            recalc: function (e) {
                var t = e.layoutRect(),
                    n = e.paddingBox();
                e.items().filter(":visible").each(function (e) {
                    e.layoutRect({
                        x: n.left,
                        y: n.top,
                        w: t.innerW - n.right - n.left,
                        h: t.innerH - n.top - n.bottom
                    }), e.recalc && e.recalc()
                })
            }
        })
    }), i(z, [d], function (e) {
        return e.extend({
            recalc: function (e) {
                var t, n, i, r, o, a, s, l, u, c, d, f, p, h, m, g, v = [],
                    x, y, b, w, _, E, C, R, T, A, k, S, D, F, I, M, N, H, P, O, L, W, z, B, U = Math.max,
                    j = Math.min;
                for (i = e.items().filter(":visible"), r = e.layoutRect(), o = e._paddingBox, a = e.settings, f = a.direction, s = a.align, l = a.pack, u = a.spacing || 0, ("row-reversed" == f || "column-reverse" == f) && (i = i.set(i.toArray().reverse()), f = f.split("-")[0]), "column" == f ? (T = "y", C = "h", R = "minH", A = "maxH", S = "innerH", k = "top", D = "bottom", F = "deltaH", I = "contentH", L = "left", H = "w", M = "x", N = "innerW", P = "minW", O = "maxW", W = "right", z = "deltaW", B = "contentW") : (T = "x", C = "w", R = "minW", A = "maxW", S = "innerW", k = "left", D = "right", F = "deltaW", I = "contentW", L = "top", H = "h", M = "y", N = "innerH", P = "minH", O = "maxH", W = "bottom", z = "deltaH", B = "contentH"), d = r[S] - o[k] - o[k], E = c = 0, t = 0, n = i.length; n > t; t++) p = i[t], h = p.layoutRect(), m = p.settings, g = m.flex, d -= n - 1 > t ? u : 0, g > 0 && (c += g, h[A] && v.push(p), h.flex = g), d -= h[R], x = o[L] + h[P] + o[W], x > E && (E = x);
                if (w = {}, w[R] = 0 > d ? r[R] - d + r[F] : r[S] - d + r[F], w[P] = E + r[z], w[I] = r[S] - d, w[B] = E, w.minW = j(w.minW, r.maxW), w.minH = j(w.minH, r.maxH), w.minW = U(w.minW, r.startMinWidth), w.minH = U(w.minH, r.startMinHeight), !r.autoResize || w.minW == r.minW && w.minH == r.minH) {
                    for (b = d / c, t = 0, n = v.length; n > t; t++) p = v[t], h = p.layoutRect(), y = h[A], x = h[R] + Math.ceil(h.flex * b), x > y ? (d -= h[A] - h[R], c -= h.flex, h.flex = 0, h.maxFlexSize = y) : h.maxFlexSize = 0;
                    for (b = d / c, _ = o[k], w = {}, 0 === c && ("end" == l ? _ = d + o[k] : "center" == l ? (_ = Math.round(r[S] / 2 - (r[S] - d) / 2) + o[k], 0 > _ && (_ = o[k])) : "justify" == l && (_ = o[k], u = Math.floor(d / (i.length - 1)))), w[M] = o[L], t = 0, n = i.length; n > t; t++) p = i[t], h = p.layoutRect(), x = h.maxFlexSize || h[R], "center" === s ? w[M] = Math.round(r[N] / 2 - h[H] / 2) : "stretch" === s ? (w[H] = U(h[P] || 0, r[N] - o[L] - o[W]), w[M] = o[L]) : "end" === s && (w[M] = r[N] - h[H] - o.top), h.flex > 0 && (x += Math.ceil(h.flex * b)), w[C] = x, w[T] = _, p.layoutRect(w), p.recalc && p.recalc(), _ += x + u
                } else if (w.w = w.minW, w.h = w.minH, e.layoutRect(w), this.recalc(e), null === e._lastRect) {
                    var V = e.parent();
                    V && (V._lastRect = null, V.recalc())
                }
            }
        })
    }), i(B, [c], function (e) {
        return e.extend({
            Defaults: {
                containerClass: "flow-layout",
                controlClass: "flow-layout-item",
                endClass: "break"
            },
            recalc: function (e) {
                e.items().filter(":visible").each(function (e) {
                    e.recalc && e.recalc()
                })
            }
        })
    }), i(U, [b, g], function (e, n) {
        function i() {}
        return e.extend({
            Defaults: {
                minWidth: 1
            },
            init: function (e) {
                var t = this;
                t._super(e), t._sortBy = e.sortBy, t._sortOrder = "asc" === e.sortDir, t._selected = [], t._data = []
            },
            postRender: function () {
                var e = this,
                    t = e.settings,
                    i = e.classPrefix;
                e._super(), e.on("keyup", function (t) {
                    var n = t.keyCode;
                    27 == n && e.cancelEdit(), 13 == n && e.applyEdit()
                }), e.on("focusout", function (t) {
                    "text" == t.target.type && e.cancelEdit()
                }), e.on("click", function (r) {
                    function o(e) {
                        for (var t = e.parentNode.childNodes, n = t.length; n--;)
                            if (t[n] === e) return n;
                        return -1
                    }
                    var a = r.target,
                        s, l, u, c, d, f, p, h;
                    do
                        if (n.hasClass(a, i + "grid-cell") && (p = !0), "TD" == a.nodeName) {
                            s = a;
                            break
                        } while (a = a.parentNode);
                    if (s)
                        if (f = t.columns, l = o(s), u = o(s.parentNode), d = f[l], n.hasClass(s, i + "grid-head-item")) d.sorting !== !1 && (h = e._sortOrder, h === e._sortOrder && (h = e._sortBy == d.name ? !h : !0), e._sortBy = d.name, e._sortOrder = h, e.update()), "checkbox" == d.type && (e.selected().length > 0 ? e.unselect(0, e.data().length) : e.select(0, e.data().length));
                        else {
                            c = e.data()[u];
                            var m = e.fire("cellclick", {
                                row: c,
                                value: c[f[l].name],
                                rowIndex: u,
                                cellIndex: l,
                                inValue: !! p
                            });
                            m.isDefaultPrevented() || (r.shiftKey ? e.select(e._focusIndex, u) : r.ctrlKey ? e[e._selected[u] ? "unselect" : "select"](u) : "checkbox" == d.type ? e[e._selected[u] ? "unselect" : "select"](u) : e.unselect(0, e._data.length).select(u))
                        }
                }), e.data(e.settings.data)
            },
            repaint: function () {
                var e = this,
                    t = e.layoutRect(),
                    n, i;
                e._super(), n = e.getEl("body").style, n.width = t.innerW + "px", n.height = t.innerH - e.getEl("head").offsetHeight + "px", i = e.getEl("thead").offsetWidth, i && (e.getEl("head").style.width = i + "px")
            },
            data: function (e) {
                var n = this;
                return e !== t ? (n._data = e, n._selected = {}, n.update(), n.repaint(), n) : n._data
            },
            update: function () {
                function e(e, t, n) {
                    function i(e, i) {
                        return e = parseFloat(e[t]), i = parseFloat(i[t]), e = isNaN(e) ? 0 : e, i = isNaN(i) ? 0 : i, n ? e - i : i - e
                    }

                    function r(e, i) {
                        return e = ("" + e[t]).toLowerCase(), i = ("" + i[t]).toLowerCase(), n ? e.localeCompare(i) : i.localeCompare(e)
                    }
                    return e.length && (e = e.sort("number" == typeof e[0][t] ? i : r)), e
                }
                var t = this,
                    i, r, o, a, s, l, u, c, d, f = t.classPrefix,
                    p, h, m = t.settings,
                    g;
                for (r = m.columns, m.sortBy && (s = e(t._data, t._sortBy, t._sortOrder)), s = t.fire("beforeUpdate", {
                    data: s
                }).data, i = [], c = t.getEl("headr"), o = 0; c.childNodes.length > o; o++) n.removeClass(c.childNodes[o].lastChild.lastChild, f + "up"), n.removeClass(c.childNodes[o].lastChild.lastChild, f + "down"), r[o].name == t._sortBy && (g = o);
                for (t._sortOrder ? n.addClass(c.childNodes[g].lastChild.lastChild, f + "up") : n.addClass(c.childNodes[g].lastChild.lastChild, f + "down"), i.push('<table><tbody id="' + t._id + '-tbody">'), a = 0; s.length > a; a++) {
                    for (h = s[a], i.push('<tr class="' + f + "grid-row", a % 2 ? " " + f + "grid-odd" : "", '">'), o = 0; r.length > o; o++) {
                        var v = {
                            row: h,
                            value: h[r[o].name || o],
                            icon: r[o].icon
                        };
                        u = r[o].filter, u && u(v), p = v.icon ? '<i class="' + f + "ico " + f + "i-" + v.icon + '" unselectable="on"></i>' : "", i.push('<td><div class="' + f + "txt " + f + 'grid-cell">', p, '<span class="' + f + "txt " + f + 'reset" title="' + v.value + '">', v.value || "&nbsp;", "</span></div></td>")
                    }
                    i.push("</tr>")
                }
                return i.push("</tbody></table>"), d = document.createElement("div"), d.innerHTML = i.join(""), l = t.getEl("tbody", !0), l.parentNode.replaceChild(d.firstChild.firstChild, l), t._data = s, t._selected = {}, t.updateCheckedState(), t
            },
            selected: function () {
                var e = this,
                    t = e._data,
                    n, i, r = e._selected,
                    o = [];
                for (n = 0, i = t.length; i > n; n++) r[n] && o.push(t[n]);
                return o
            },
            selectable: function () {
                var e = this,
                    t = e._data,
                    n, i, r = [];
                for (n = 0, i = t.length; i > n; n++) t[n].isParent || r.push(t[n]);
                return r
            },
            isSelected: function (e) {
                return !!this._selected[e]
            },
            unselect: function (e, t) {
                return this.setRowState(e, t, !1)
            },
            select: function (e, t) {
                return this.setRowState(e, t, !0)
            },
            setRowState: function (e, i, r) {
                var o = this,
                    a, s, l, u, c, d = o.classPrefix;
                for (e === t && i === t ? (e = 0, i = o._data.length) : i === t && (i = e), c = o._data.length - 1, e = e ? e > c ? c : e : 0, i = i ? i > c ? c : i : 0, l = o._selected, l || (o._selected = l = {}), o._rendered && (s = o.getEl("tbody", !0).rows), r ? o._focusIndex = e : delete o._focusIndex, e > i && (u = e, e = i, i = u), a = e; i >= a; a++) o._data[a] && !o._data[a].isParent && (s && n.toggleClass(s[a], d + "checked", r), l[a] = r);
                return o.fire("select", {
                    selected: o.selected()
                }), o.updateCheckedState(), o
            },
            updateCheckedState: function () {
                var e = this,
                    t, i, r = e.classPrefix;
                for (i = e.settings.columns, t = 0; i.length > t; t++)
                    if ("checkbox" == i[t].type) {
                        var o = e.getEl("headr").childNodes[t].firstChild.firstChild;
                        e.selected().length && e.selected().length == e.selectable().length ? (n.removeClass(o, r + "inter"), n.addClass(o, r + "checked")) : e.selected().length ? (n.removeClass(o, r + "checked"), n.addClass(o, r + "inter")) : (n.removeClass(o, r + "checked"), n.removeClass(o, r + "inter"))
                    }
            },
            edit: function (e, t, r, o) {
                var a = this,
                    s = a.data(),
                    l = a.settings.columns,
                    u, c, d, f, p;
                a.cancelEdit(), p = s[e][l[t].name], p = a.fire("beforeEdit", {
                    value: p
                }).value, u = a.getEl("tbody", !0), c = u.childNodes[e].childNodes[t].firstChild, c.lastChild.style.display = "none", c.appendChild(n.createFragment('<span id="' + a._id + '-edit" class="mce-grid-edit"><input type="text" value="' + p + '" class="mce-reset" /></span>')), d = a.getEl("edit", !0), f = d.firstChild, f.focus(), a.applyEdit = function () {
                    o = i, a.cancelEdit(), c.lastChild.innerText = s[e][t] = f.value, r && r({
                        value: f.value
                    })
                }, a.cancelEdit = function () {
                    a.cancelEdit = a.applyEdit = i, d.previousSibling.style.display = "", d.parentNode.removeChild(d), o && o()
                }
            },
            cancelEdit: i,
            applyEdit: i,
            renderHtml: function () {
                var e = this,
                    t = [],
                    n = e.settings,
                    i, r = n.columns,
                    o, a, s, l, u = e.classPrefix;
                for (o = 0; r.length > o; o++) a = r[o].width, "number" == typeof a && (a > 0 && 1 > a ? a = 100 * a + "%" : a += "px"), r[o].width = a;
                for (t.push('<div id="' + e._id + '" class="' + e.classes() + " " + u + 'grid">'), t.push('<div class="' + u + 'grid-head" unselectable="true"><table id="' + e._id + '-head" class="' + u + 'grid-head"><tbody><tr id="' + e._id + '-headr">'), o = 0; r.length > o; o++) i = r[o], a = i.width, i.sorting !== !1 && "checkbox" != i.type && (s = '<i class="' + u + 'caret"></i>'), l = e.encode(i.title) || "&nbsp;", "checkbox" == i.type && (l = '<i class="' + u + "ico " + u + 'i-checkbox" unselectable="on"></i>' + l), t.push('<td class="' + u + 'grid-head-item"', a ? ' style="width: ' + a + '"' : "", '><div class="' + u + "txt " + u + 'grid-cell">', l, s, "</div></td>");
                for (t.push("</tr></tbody></table></div>"), t.push('<div id="' + e._id + '-body" class="' + u + 'grid-body"><table>'), t.push('<thead id="' + e._id + '-thead">'), o = 0; r.length > o; o++) a = r[o].width, t.push("<td", a ? ' style="width: ' + r[o].width + '"' : "", '><div class="' + u + "txt " + u + 'grid-cell">', o, "</div></td>");
                return t.push('</thead><tbody id="' + e._id + '-tbody"></tbody></table></div></div>'), t.join("")
            }
        })
    }), i(j, [d], function (e) {
        return e.extend({
            recalc: function (e) {
                var t = e.settings,
                    n, i, r, o, a, s, l, u, c, d, f, p, h, m, g, v, x, y, b, w, _, E, C = [],
                    R = [],
                    T, A, k, S, D, F;
                for (t = e.settings, r = e.items().filter(":visible"), o = e.layoutRect(), i = t.columns || Math.ceil(Math.sqrt(r.length)), n = Math.ceil(r.length / i), x = t.spacingH || t.spacing || 0, y = t.spacingV || t.spacing || 0, b = t.alignH || t.align, w = t.alignV || t.align, g = e._paddingBox, d = 0; i > d; d++) C.push(0);
                for (f = 0; n > f; f++) R.push(0);
                for (f = 0; n > f; f++)
                    for (d = 0; i > d && (c = r[f * i + d], c); d++) u = c.layoutRect(), T = u.minW, A = u.minH, C[d] = T > C[d] ? T : C[d], R[f] = A > R[f] ? A : R[f];
                for (D = o.innerW - g.left - g.right, _ = 0, d = 0; i > d; d++) _ += C[d] + (d > 0 ? x : 0), D -= (d > 0 ? x : 0) + C[d];
                for (F = o.innerH - g.top - g.bottom, E = 0, f = 0; n > f; f++) E += R[f] + (f > 0 ? y : 0), F -= (f > 0 ? y : 0) + R[f];
                if (_ += g.left + g.right, E += g.top + g.bottom, l = {}, l.minW = _ + (o.w - o.innerW), l.minH = E + (o.h - o.innerH), l.contentW = l.minW - o.deltaW, l.contentH = l.minH - o.deltaH, l.minW = Math.min(l.minW, o.maxW), l.minH = Math.min(l.minH, o.maxH), l.minW = Math.max(l.minW, o.startMinWidth), l.minH = Math.max(l.minH, o.startMinHeight), !o.autoResize || l.minW == o.minW && l.minH == o.minH) {
                    o.autoResize && (l = e.layoutRect(l), l.contentW = l.minW - o.deltaW, l.contentH = l.minH - o.deltaH);
                    var I;
                    I = "start" == t.packV ? 0 : F > 0 ? Math.floor(F / n) : 0;
                    var M = 0,
                        N = t.flexWidths;
                    if (N)
                        for (d = 0; N.length > d; d++) M += N[d];
                    else M = i;
                    var H = D / M;
                    for (d = 0; i > d; d++) C[d] += N ? Math.ceil(N[d] * H) : H;
                    for (h = g.top, f = 0; n > f; f++) {
                        for (p = g.left, s = R[f] + I, d = 0; i > d && (c = r[f * i + d], c); d++) m = c.settings, u = c.layoutRect(), a = C[d], k = S = 0, u.x = p, u.y = h, v = m.alignH || b, "center" == v ? u.x = p + a / 2 - u.w / 2 : "right" == v ? u.x = p + a - u.w : "stretch" == v && (u.w = a), v = m.alignV || w, "center" == v ? u.y = h + s / 2 - u.h / 2 : "bottom" == v ? u.y = h + s - u.h : "stretch" == v && (u.h = s), c.layoutRect(u), p += a + x, c.recalc && c.recalc();
                        h += s + y
                    }
                } else if (l.w = l.minW, l.h = l.minH, e.layoutRect(l), this.recalc(e), null === e._lastRect) {
                    var P = e.parent();
                    P && (P._lastRect = null, P.recalc())
                }
            }
        })
    }), i(V, [b], function (e) {
        return e.extend({
            renderHtml: function () {
                var e = this;
                return e.addClass("iframe"), e.canFocus = !1, '<iframe id="' + e._id + '" class="' + e.classes() + '" tabindex="-1" src="' + (e.settings.url || "javascript:''") + '"></iframe>'
            },
            src: function (e) {
                this.getEl().src = e
            },
            html: function (e) {
                return this.getEl().contentWindow.document.body.innerHTML = e, this
            }
        })
    }), i(q, [b], function (e) {
        return e.extend({
            init: function (e) {
                var t = this;
                t._super(e), t.addClass("image"), t.on("click", function (e) {
                    -1 != e.target.className.indexOf("checkbox") && t.toggleClass("checked", !0)
                })
            },
            renderHtml: function () {
                var e = this,
                    t = e._id,
                    n = e.classPrefix,
                    i = e.settings,
                    r = i.icon;
                return '<div id="' + t + '" class="' + e.classes() + '">' + (r ? '<i class="' + n + "ico " + n + "i-" + r + '"></i>' : "") + (i.url ? '<img src="' + i.url + '" />' : "") + '<div class="' + n + 'info">' + (i.selectable ? '<i class="' + n + "ico " + n + 'i-checkbox"></i>' : "") + e.settings.text + "</div>" + "</div>"
            }
        })
    }), i(X, [], function () {
        function e(e) {
            return "[object Number]" == Object.prototype.toString.call(e)
        }

        function n(e, t, n) {
            var i = e.createShader(t);
            if (e.shaderSource(i, n), e.compileShader(i), !e.getShaderParameter(i, e.COMPILE_STATUS)) throw "compile error: " + e.getShaderInfoLog(i);
            return i
        }
        var i = "attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main() {texCoord = _texCoord;gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);}",
            r = "uniform sampler2D texture;varying vec2 texCoord;void main() {gl_FragColor = texture2D(texture, texCoord);}";
        return function (o, a, s) {
            function l(t) {
                o.useProgram(p);
                for (var n in t)
                    if (t.hasOwnProperty(n)) {
                        var i = o.getUniformLocation(p, n);
                        if (null !== i) {
                            var r = t[n];
                            if (r.length) switch (r.length) {
                            case 1:
                                o.uniform1fv(i, new Float32Array(r));
                                break;
                            case 2:
                                o.uniform2fv(i, new Float32Array(r));
                                break;
                            case 3:
                                o.uniform3fv(i, new Float32Array(r));
                                break;
                            case 4:
                                o.uniform4fv(i, new Float32Array(r));
                                break;
                            case 9:
                                o.uniformMatrix3fv(i, !1, new Float32Array(r));
                                break;
                            case 16:
                                o.uniformMatrix4fv(i, !1, new Float32Array(r));
                                break;
                            default:
                                throw "dont't know how to load uniform \"" + n + '" of length ' + r.length
                            } else {
                                if (!e(r)) throw 'attempted to set uniform "' + n + '" to invalid value ' + ("" + (r || "undefined"));
                                o.uniform1f(i, r)
                            }
                        }
                    }
                return f
            }

            function u(e) {
                o.useProgram(p);
                for (var t in e) e.hasOwnProperty(t) && o.uniform1i(o.getUniformLocation(p, t), e[t]);
                return f
            }

            function c(e, n, i, r) {
                var a = o.getParameter(o.VIEWPORT);
                return n = n !== t ? (n - a[1]) / a[3] : 0, e = e !== t ? (e - a[0]) / a[2] : 0, i = i !== t ? (i - a[0]) / a[2] : 1, r = r !== t ? (r - a[1]) / a[3] : 1, o.vertexBuffer || (o.vertexBuffer = o.createBuffer()), o.bindBuffer(o.ARRAY_BUFFER, o.vertexBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([e, n, e, r, i, n, i, r]), o.STATIC_DRAW), o.texCoordBuffer || (o.texCoordBuffer = o.createBuffer(), o.bindBuffer(o.ARRAY_BUFFER, o.texCoordBuffer), o.bufferData(o.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), o.STATIC_DRAW)), h || (h = o.getAttribLocation(p, "vertex"), o.enableVertexAttribArray(h)), m || (m = o.getAttribLocation(p, "_texCoord"), o.enableVertexAttribArray(m)), o.useProgram(p), o.bindBuffer(o.ARRAY_BUFFER, o.vertexBuffer), o.vertexAttribPointer(h, 2, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ARRAY_BUFFER, o.texCoordBuffer), o.vertexAttribPointer(m, 2, o.FLOAT, !1, 0, 0), o.drawArrays(o.TRIANGLE_STRIP, 0, 4), f
            }

            function d() {
                o.deleteProgram(p), p = null
            }
            var f = this,
                p, h, m;
            if (p = o.createProgram(), a = a || i, s = s || r, s = "precision highp float;" + s, o.attachShader(p, n(o, o.VERTEX_SHADER, a)), o.attachShader(p, n(o, o.FRAGMENT_SHADER, s)), o.linkProgram(p), !o.getProgramParameter(p, o.LINK_STATUS)) throw "link error: " + o.getProgramInfoLog(p);
            f.uniforms = l, f.textures = u, f.drawRect = c, f.destroy = d
        }
    }), i(G, [], function () {
        return function (e, t, n, i, r) {
            function o(o) {
                t = o.width || o.videoWidth, n = o.height || o.videoHeight, e.bindTexture(e.TEXTURE_2D, u), e.texImage2D(e.TEXTURE_2D, 0, i, i, r, o)
            }

            function a() {
                e.deleteTexture(u), u = null
            }

            function s(t) {
                e.activeTexture(e.TEXTURE0 + (t || 0)), e.bindTexture(e.TEXTURE_2D, u)
            }

            function l(i) {
                e.framebuffer = e.framebuffer || e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, e.framebuffer), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, u, 0), e.viewport(0, 0, t, n), i(), e.bindFramebuffer(e.FRAMEBUFFER, null)
            }
            var u = e.createTexture();
            return i = i || e.RGBA, r = r || e.UNSIGNED_BYTE, e.bindTexture(e.TEXTURE_2D, u), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), t && n && e.texImage2D(e.TEXTURE_2D, 0, i, t, n, 0, i, r, null), {
                loadContentsOf: o,
                destroy: a,
                use: s,
                drawTo: l,
                width: t,
                height: n
            }
        }
    }), i(Y, [X, G], function (e, n) {
        var i = {
            vibrance: "uniform sampler2D texture;\nuniform float adjust;\nvarying vec2 texCoord;\n\nvoid main() {\n    vec4 color = texture2D(texture, texCoord);\n    float average = (color.r + color.g + color.b) / 3.0;\n    float mx = max(color.r, max(color.g, color.b));\n    float amt = (mx - average) * (-adjust * 3.0);\n\n    color.rgb = mix(color.rgb, vec3(mx), amt);\n\n    gl_FragColor = color;\n}\n",
            triangleblur: "uniform sampler2D texture;\nuniform vec2 delta;\nvarying vec2 texCoord;\n\nfloat random(vec3 scale, float seed) {\n	/* use the fragment position for a different seed per-pixel */\n	return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n	vec4 color = vec4(0.0);\n	float total = 0.0;\n\n	/* randomize the lookup values to hide the fixed number of samples */\n	float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n	for (float t = -30.0; t <= 30.0; t++) {\n		float percent = (t + offset - 0.5) / 30.0;\n		float weight = 1.0 - abs(percent);\n		vec4 sample = texture2D(texture, texCoord + delta * percent);\n\n		/* switch to pre-multiplied alpha to correctly blur transparent images */\n		sample.rgb *= sample.a;\n\n		color += sample * weight;\n		total += weight;\n	}\n\n	gl_FragColor = color / total;\n\n	/* switch back from pre-multiplied alpha */\n	gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n\n",
            sepia: "uniform sampler2D texture;\r\nuniform float adjust;\r\nvarying vec2 texCoord;\r\n\r\nvoid main() {\r\n	vec4 color = texture2D(texture, texCoord);\r\n\r\n	float r = color.r;\r\n	float g = color.g;\r\n	float b = color.b;\r\n\r\n	color.r = min(1.0, (r * (1.0 - (0.607 * adjust))) + (g * (0.769 * adjust)) + (b * (0.189 * adjust)));\r\n	color.g = min(1.0, (r * 0.349 * adjust) + (g * (1.0 - (0.314 * adjust))) + (b * 0.168 * adjust));\r\n	color.b = min(1.0, (r * 0.272 * adjust) + (g * 0.534 * adjust) + (b * (1.0 - (0.869 * adjust))));\r\n\r\n	gl_FragColor = color;\r\n}",
            saturate: "uniform sampler2D texture;\r\nuniform float adjust;\r\nvarying vec2 texCoord;\r\n\r\nvoid main() {\r\n	vec4 color = texture2D(texture, texCoord);\r\n	float average = (color.r + color.g + color.b) / 3.0;\r\n\r\n	color.rgb += (average - color.rgb) * (adjust * -1.0);\r\n\r\n	gl_FragColor = color;\r\n}\r\n",
            invert: "uniform sampler2D texture;\r\nvarying vec2 texCoord;\r\n\r\nvoid main() {\r\n	vec4 sample = texture2D(texture, texCoord);\r\n\r\n	sample.r = 1.0 - sample.r;\r\n	sample.g = 1.0 - sample.g;\r\n	sample.b = 1.0 - sample.b;\r\n\r\n	gl_FragColor = sample;\r\n}\r\n",
            hue: "uniform sampler2D texture;\nuniform float adjust;\nvarying vec2 texCoord;\n\nvoid main() {\n	vec4 color = texture2D(texture, texCoord);\n\n	/* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\n	float angle = adjust * 3.14159265;\n	float s = sin(angle), c = cos(angle);\n	vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n	float len = length(color.rgb);\n	color.rgb = vec3(\n		dot(color.rgb, weights.xyz),\n		dot(color.rgb, weights.zxy),\n		dot(color.rgb, weights.yzx)\n	);\n\n	gl_FragColor = color;\n}\n",
            grayscale: "uniform sampler2D texture;\r\nvarying vec2 texCoord;\r\n\r\nvoid main() {\r\n	vec4 sample = texture2D(texture, texCoord);\r\n\r\n	sample.r = sample.g = sample.b = (sample.r + sample.g + sample.b) / 3.0;\r\n\r\n	gl_FragColor = sample;\r\n}\r\n",
            gamma: "uniform sampler2D texture;\r\nvarying vec2 texCoord;\r\nuniform float adjust;\r\n\r\nvoid main() {\r\n	vec4 sample = texture2D(texture, texCoord);\r\n\r\n	sample.r = pow(sample.r / 1.0, adjust) * 1.0;\r\n	sample.g = pow(sample.g / 1.0, adjust) * 1.0;\r\n	sample.b = pow(sample.b / 1.0, adjust) * 1.0;\r\n\r\n	gl_FragColor = sample;\r\n}\r\n",
            flippedshader: "uniform sampler2D texture;\r\nvarying vec2 texCoord;\r\n\r\nvoid main() {\r\n	gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\r\n}\r\n",
            exposure: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float adjust;\n\nvoid main() {\n	vec4 sample = texture2D(texture, texCoord);\n\n	sample.rgb = (1.0 - exp(-(sample.rgb) * adjust));\n\n	gl_FragColor = sample;\n}\n",
            convolute: "uniform sampler2D texture;\r\nuniform mat3 kernel;\r\nvarying vec2 texCoord;\r\nuniform vec2 textureSize;\r\n\r\nvoid main() {\r\n	vec2 onePixel = vec2(1.0, 1.0) / textureSize;\r\n	vec4 colorSum;\r\n\r\n	float kernelWeight;\r\n	for (int y = 0; y < 3; y++) {\r\n		for (int x = 0; x < 3; x++) {\r\n			colorSum += texture2D(texture, texCoord + onePixel * vec2(1 - y, 1 - x)) * kernel[x][y];\r\n			kernelWeight += kernel[y][x];\r\n		}\r\n	}\r\n\r\n	if (kernelWeight <= 0.0) {\r\n		kernelWeight = 1.0;\r\n	}\r\n\r\n	gl_FragColor = vec4((colorSum